import"./base-361a4e37.js";import{i as ze,G as Ke,k as Qe,H as Le,f as F,I as Ue,d as Xe,_ as Z,a as H,r as oe,m as Ye,e as eo,g as oo,p as g,h as j,u as so,E as ao,c as to,b as no,j as lo,n as io,q as ro,o as co}from"./flag-85d490b2.js";/* empty css                   */import{f as uo,g as ho,h as po,j as fo}from"./el-button-2c19bbef.js";import{D as mo,ai as go,B as _,c as _o,o as n,k as c,m as r,F as V,O as f,P as I,v as u,s as m,n as L,a1 as C,t as y,q as N,p as vo,H as ee,l as Io,aj as yo,M as Co,N as bo,R as ko,S as Lo}from"./index-d1cde4b6.js";import{_ as Uo,G as R,P as M,D as Eo,b as No}from"./_plugin-vue_export-helper-9c88e07d.js";import{E as wo}from"./index-7bbf4eff.js";const x=A=>(ko("data-v-10425986"),A=A(),Lo(),A),Vo={class:"drawer"},xo={class:"check section"},Oo={class:"content"},Do={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",fill:`
                              none
                            `,version:"1.1",width:"9.999975204467773",height:"9.999975204467773",viewBox:"0 0 9.999975204467773 9.999975204467773"},So=["fill"],To={key:0,src:Z},$o={key:1,src:H},Po={key:1,style:{display:"inline-flex"}},Mo={class:"specialTitle"},Bo={class:"image section"},Fo={class:"content"},jo=x(()=>r("div",{class:"questionItem__header"},[r("img",{src:oe}),r("span",{class:"questionItem__header__title"},"面型评估")],-1)),Ro=["src"],Ao=["onClick"],Wo=["src"],qo={key:0,src:Z},Jo={key:1,src:H},Go=x(()=>r("div",{class:"questionItem__header"},[r("img",{src:oe}),r("span",{class:"questionItem__header__title"},"口内照")],-1)),Zo=["src"],Ho=["onClick"],zo=["src"],Ko={key:0,src:Z},Qo={key:1,src:H},Xo=x(()=>r("div",{class:"questionItem__header"},[r("img",{src:oe}),r("span",{class:"questionItem__header__title"},"全景片")],-1)),Yo=["src"],es=["onClick"],os=["src"],ss={class:"imageItem__content specialComponent",style:{"min-width":"780px"}},as={class:"container"},ts={class:"left-column"},ns={key:0,src:Z},ls={key:1,src:H},is={class:"leftLower-column"},rs=["onClick"],ds={class:"diagram"},cs={class:"diagramBox"},us={class:"toothItem1"},hs={class:"toothItem2"},ps={class:"diagramBox"},fs={class:"toothItem3"},ms={class:"toothItem4"},gs={class:"selectContainer",id:"selectContainer"},_s={class:"container"},vs=["id","onClick"],Is=x(()=>r("div",{class:"left"},"右",-1)),ys=x(()=>r("div",{class:"right"},"左",-1)),Cs={class:"footer"},bs={class:"dialog-footer"},ks={class:"imageManagement__images subSection"},Ls={class:"title"},Us=x(()=>r("div",{class:"title__left"},"图库",-1)),Es=x(()=>r("div",{class:"title__middle"},[r("img",{src:Ye,style:{"margin-right":"4px"}}),C(" 可直接拖拽照片到右侧指定位置或点击下方一键“自动分类”哦～ ")],-1)),Ns={class:"title__right file-upload"},ws={class:"file-upload__label"},Vs={style:{"padding-left":"14px","padding-bottom":"50px","padding-top":"50px"}},xs={key:0,class:"imgContainer__empty",src:eo},Os={class:"imgContainer"},Ds=["onMouseenter","onMouseleave"],Ss={style:{position:"relative",border:"1px solid #e5e6eb","border-radius":"12px"}},Ts=["src","onDragstart","onClick"],$s=["onClick"],Ps=x(()=>r("span",null,"加载上次影像",-1)),Ms=x(()=>r("img",{src:io},null,-1)),Bs=[Ps,Ms],Fs={class:"classifyWrapper"},js={style:{"margin-right":"6px"}},Rs={class:"imageManagement__classify subSection"},As=x(()=>r("div",{class:"title"},"分类",-1)),Ws={class:"imageWrapper"},qs=["onMouseenter","onMouseleave"],Js={style:{position:"relative",border:"1px solid #e5e6eb","border-radius":"12px"}},Gs=["src","onDrop","onDragover","onDragstart"],Zs={key:0,style:{cursor:"pointer"},class:"deleteImage",src:oo},Hs={class:"item__caption"},zs={class:"dialog-footer"},Ks=x(()=>r("img",{id:"img",style:{opacity:0}},null,-1)),Qs={__name:"evaluate",setup(A){mo(()=>{window.addEventListener("click",a=>{const o=document.querySelector(".el-popper.el-popover");if(o&&a.target!==o&&!o.contains(a.target)){const e=w.value[0].orthTitleList.findIndex(i=>i.popVisible===!0);e!==-1&&(w.value[0].orthTitleList[e].popVisible=!1)}})});const se=go(),W=_(),E=se.params.appId,z=se.params.patientId;W.value=ze;const K=_([]),Ee=a=>{K.value.forEach(o=>{o.forEach(e=>{var i;e.active=!1,(i=a.toothCode)!=null&&i.includes(e.value+"")&&(e.active=!0)})})},ae=_([]);async function Ne(){const a=await R(`/prod-api/business/orthClass/list/1/临床检查/${E}`);ae.value=a.data[0],a.data.forEach(o=>{o.orthTitleList.forEach(e=>e.showInput=!1)}),a.data.forEach(o=>{o.orthTitleList.forEach(e=>{if(e.orthOptionsList[e.orthOptionsList.length-1].otherContent&&(e.otherContent=e.orthOptionsList[e.orthOptionsList.length-1].otherContent),e.titleName=="关节弹响"){e.optionId="",e.text="",e.showInput=!1,e.selectId="";const i=e.orthOptionsList.filter(l=>l.choosen===!0);if(i.length>0){e.optionId=i[0].id;const l=e.listMap.filter(p=>p.choosen===!0);l.length>0&&(e.selectId=l[0].id)}}else if(e.titleName=="侧关节"){e.optionId=[],e.text="",e.showInput=!1,e.selectId1="",e.selectId2="";const i=e.orthOptionsList.filter(p=>p.choosen===!0);i.length>0&&(e.selectId1=i[0].id);const l=e.listMap.filter(p=>p.choosen===!0);l.length>0&&(e.selectId2=l[0].id)}else if(e.titleName=="骨龄"){e.optionId="",e.text="",e.showInput=!1,e.selectId1="",e.selectId2="".filter(l=>l.optionName==="骨龄超"||l.optionName==="骨龄晚").map(()=>_(null)),e.orthOptionsList.forEach(l=>{(l.optionName==="骨龄超"||l.optionName==="骨龄晚")&&(l.fillColor="#C9CDD4",l.seriousColor="#f44c4c",l.hoverColor="#2e6ce4",l.clicked=!!l.choosen,l.visible=!1)});const i=e.orthOptionsList.filter(l=>l.choosen===!0);i.length>0&&(e.optionId=i[0].id)}else if(e.type==1){e.optionId="",e.text="",e.showInput=!1;const i=e.orthOptionsList.filter(l=>l.choosen===!0);i.length>0&&(e.optionId=i[0].id)}else if(e.type==2){e.optionId=[],e.optionId1=[],e.text="",e.showInput=!1;const i=e.orthOptionsList.filter(l=>l.choosen===!0);i.length>0&&(e.optionId=i.map(l=>l.id),e.optionId1=e.optionId)}})})}const te=_([]);async function ne(){const a=await R(`/prod-api/business/orthClass/list/1/面型评估/${E}`);te.value=a.data,a.data.forEach(o=>o.orthTitleList.forEach(e=>e.showInput=!1)),a.data.forEach(o=>{o.imageUrl?o.hasImage=!0:o.hasImage=!1,o.orthTitleList.forEach(e=>{if(e.type==1){e.optionId="",e.text="",e.showInput=!1;const i=e.orthOptionsList.filter(l=>l.choosen===!0);i.length>0&&(e.optionId=i[0].id)}else if(e.type==2){e.optionId=[],e.optionId1=[],e.text="",e.showInput=!1;const i=e.orthOptionsList.filter(l=>l.choosen===!0);i.length>0&&(e.optionId=i.map(l=>l.id),e.optionId1=e.optionId)}})})}const le=_([]);async function ie(){const a=await R(`/prod-api/business/orthClass/list/1/口内照/${E}`);le.value=a.data,a.data.forEach(o=>o.orthTitleList.forEach(e=>e.showInput=!1)),a.data.forEach(o=>{o.imageUrl?o.hasImage=!0:o.hasImage=!1,o.orthTitleList.forEach(e=>{if(e.type==1){e.optionId="",e.text="",e.showInput=!1;const i=e.orthOptionsList.filter(l=>l.choosen===!0);i.length>0&&(e.optionId=i[0].id)}else if(e.type==2){e.optionId=[],e.optionId1=[],e.text="",e.showInput=!1;const i=e.orthOptionsList.filter(l=>l.choosen===!0);i.length>0&&(e.optionId=i.map(l=>l.id),e.optionId1=e.optionId)}})})}const we=_(),w=_([]),re=_(!1),de=_([]),ce=_(),ue=_();async function he(){const a=await R(`/prod-api/business/orthClass/list/1/全景片/${E}`);w.value=a.data,a.data.forEach(o=>{if(ce.value=o.sourceApmtId?o.sourceApmtId:E,ue.value=o.id,o.imageUrl?(o.hasImage=!0,we.value=o.imageUrl):o.hasImage=!1,!o.flag){re.value=!0;const e={sourceApmtId:ce.value,apmtId:E,classId:ue.value};M("/prod-api/business/orthClass/mouthCheck",e).then(i=>{if(i.code==200){const l=w.value[0].orthTitleList.slice(0,6);de.value=i.data.slice(6),w.value[0].orthTitleList=[...l,...de.value],pe(w)}})}o.orthTitleList.forEach(e=>{e.showInput=!1,e.popVisible=!1})}),re.value||pe(w)}function pe(a){console.log(11),a.value.forEach(o=>{o.orthTitleList.forEach(e=>{e.topLeft=[],e.topRight=[],e.bottomLeft=[],e.bottomRight=[];const i=JSON.parse(e.showPosition);e.fdiToothCode?(e.toothCode=e.fdiToothCode.split(","),e.fdiToothCode.split(",").forEach((l,p)=>{l.startsWith("1")||l.startsWith("5")?e.topLeft.push(i[p][0]):l.startsWith("2")||l.startsWith("6")?e.topRight.push(i[p][0]):l.startsWith("4")||l.startsWith("8")?e.bottomLeft.push(i[p][0]):(l.startsWith("3")||l.startsWith("7"))&&e.bottomRight.push(i[p][0])})):e.toothCode=[],e.position=i||[],e.submitAble=!1})}),a.value.forEach(o=>{o.orthTitleList.forEach(e=>{if(e.type==1){e.optionId="",e.text="",e.showInput=!1;const i=e.orthOptionsList.filter(l=>l.choosen===!0);i.length>0&&(e.optionId=i[0].id)}else if(e.type==2){e.optionId=[],e.optionId1=[],e.text="",e.showInput=!1;const i=e.orthOptionsList.filter(l=>l.choosen===!0);i.length>0&&(e.optionId=i.map(l=>l.id),e.optionId1=e.optionId)}})})}Ne(),ne(),ie(),he();const S=(a,o)=>{o.type==2&&(o.optionId1.includes(10)&&o.optionId1.length<o.optionId.length?(o.optionId1=o.optionId.filter(e=>e!==10),o.optionId=o.optionId1):!o.optionId1.includes(10)&&o.optionId1.length<o.optionId.length&&o.optionId.includes(10)&&(o.optionId1=[10],o.optionId=[10],o.otherContent=""),o.orthOptionsList.forEach(e=>{o.optionId.includes(e.id)?e.choosen=!0:e.choosen=!1})),o.type==1&&o.orthOptionsList.forEach(e=>{a!==e.id&&(e.choosen=!1)}),Ve(o.optionId,o)};async function Ve(a,o){let e=null;o.type==1?e={apmtId:E,titleId:o.id,optionsIdStr:[a],otherContent:o.otherContent,cephalometricsContent:o.cephalometricsContent,fdiToothCode:"",showPosition:""}:o.type==2&&(e={apmtId:E,titleId:o.id,optionsIdStr:a,otherContent:o.otherContent,cephalometricsContent:"",fdiToothCode:"",showPosition:""}),await M("/prod-api/business/optionsResult",e)}const B=_(!1),O=_([{caption:"正面像",typeName:"FrontalRepose",fileUrl:g},{caption:"正面微笑像",typeName:"FrontalSmile",fileUrl:g},{caption:"90度侧面像",typeName:"LeftProfile",fileUrl:g},{caption:"90度侧面微笑像",typeName:"RightProfile",fileUrl:g},{caption:"45度侧面像",typeName:"LeftSideProfile",fileUrl:g},{caption:"45度侧面微笑像",typeName:"RightSideProfile",fileUrl:g},{caption:"口内照（左侧）",typeName:"",fileUrl:g},{caption:"口内照（右侧）",typeName:"",fileUrl:g},{caption:"磨牙关系（左侧）",typeName:"Left",fileUrl:g},{caption:"磨牙关系（右侧）",typeName:"Right",fileUrl:g},{caption:"正面咬合",typeName:"Anterior",fileUrl:g},{caption:"前牙覆盖",typeName:"Cover",fileUrl:g},{caption:"上颌",typeName:"Upper",fileUrl:g},{caption:"下颌",typeName:"Lower",fileUrl:g},{caption:"全景片",typeName:"Panoramic",fileUrl:g},{caption:"侧位片",typeName:"Cephalometric",fileUrl:g}]);async function fe(){const a=await R(`/prod-api/business/orthImage/list?apmtId=${E}`);a.code==200&&a.data.length>0?a.data.forEach(o=>{O.value.forEach(e=>{o.imageType==e.caption&&(e.fileUrl=o.imageUrl,e.id=o.id)})}):O.value.forEach(o=>{o.fileUrl=g})}const xe=_([]),Q=_([]),Oe=new FormData;K.value=Ke();const me=_(!1),De=a=>{const o=a.target.files;if(o.length>16)a.preventDefault(),j("最多上传16张图片");else{for(let e=0;e<o.length;e++){const i=o[e];if(Oe.append("files",i),i){const l=new FileReader;l.onload=()=>{xe.value.push(l.result),Q.value.push({imgUrl:l.result,showFlag:!1,choose:!0,file:i})},l.readAsDataURL(i)}}me.value?b.value[0].imageList=Q.value:(b.value.unshift({file:!0,StartTime:"2023-8-14",imageList:Q.value}),me.value=!0)}},ge=_o(()=>{let a=0;return b.value.forEach(o=>{o.imageList.forEach(e=>{e.choose&&a++})}),a}),_e=a=>{a.choose=!a.choose},ve=a=>{a.id?Eo(`/prod-api/business/orthImage/${a.id}`).then(o=>{if(o.code==200){const e=O.value.find(i=>a==i);e.fileUrl=g,e.id=void 0}}):a.fileUrl=g},Ie=_(0),b=_([]),q=_([]),X=()=>{B.value=!0,O.value.forEach(a=>{a.fileUrl=g}),fe()},Se=()=>{if(b.value.length<q.value.length){q.value[b.value.length].imageList.forEach(o=>{o.imgUrl=o.fileUrl});const a=q.value.slice(Ie.value+1).find(o=>o.imageList.length!==0);a?(b.value.push(a),Ie.value=q.value.findIndex(o=>o==b.value[b.value.length-1]),b.value[b.value.length-1].imageList.forEach(o=>{o.imgUrl=o.fileUrl})):j("没有更多图像了哦")}},ye=_();async function Te(){if(ge.value==0)j({message:"未选中图片",type:"error"});else{const a=wo.service({lock:!0,text:"正在分类中",background:"rgba(0, 0, 0, 0.7)",target:ye.value}),o=new FormData;let e,i;b.value.filter(p=>p.file===void 0).forEach(p=>{i=p.imageList.filter(U=>U.choose===!0).map(U=>{if(U.choose)return{ljUrl:U.imgUrl,ljId:U.id,LJCreateDatetime:U.timestamp}})}),e=JSON.stringify({patientId:z,apmtId:E,orthImageList:i}),b.value.filter(p=>p.file===!0).length>0?b.value.filter(p=>p.file===!0)[0].imageList.filter(p=>p.choose===!0).forEach(p=>{o.append("files",p.file)}):o.append("files",null),o.append("orthImageString",e);const l=await M("/prod-api/business/orthImage/handleMultiImage",o,!0);a.close(),l.code===200&&(b.value.forEach(p=>p.imageList.forEach(U=>U.choose=!1)),l.data.forEach(p=>{O.value.forEach(U=>{p.typeName==U.typeName&&(U.fileUrl=p.fileUrl)})}))}}const D=_(null),Y=_(),$e=a=>{D.value=a,D.value.rightDrop=!0,Y.value=D.value.fileUrl;const o=document.getElementById("img");o.src=a.fileUrl,o.style.opacity=1,o.width=120,o.height=80,o.style.position="absolute",o.style.top="-9999px",o.style.objectFit="cover",o.style.border="2px solid #2E6CE4",o.style.boxShadow="0px 9px 18px 0px rgba(0, 0, 0, 0.57)",event.dataTransfer.setDragImage(o,60,40)},Pe=(a,o)=>{a.file?(o.dataTransfer.setData("text/plain",a),D.value=o.dataTransfer.files[0]):D.value=a;const e=document.getElementById("img");e.src=a.imgUrl,e.style.opacity=1,e.width=120,e.height=80,e.style.position="absolute",e.style.top="-9999px",e.style.objectFit="cover",e.style.border="2px solid #2E6CE4",e.style.boxShadow="0px 9px 18px 0px rgba(0, 0, 0, 0.57)",o.dataTransfer.setDragImage(e,60,40)},Ce=()=>{const a=document.getElementById("img");a.style.opacity=0},Me=(a,o)=>{const e=document.getElementById("img");if(e.style.opacity=0,a.target.classList.remove("hover"),!D.value.rightDrop)je(D.value,o);else{if(D.value.id)ve(D.value);else{const i=O.value.find(l=>D.value.fileUrl==l.fileUrl);i.fileUrl=g}o.id?No("/prod-api/business/orthImage",{id:o.id,imageUrl:Y.value}).then(()=>{fe()}):o.fileUrl=Y.value}},Be=a=>{!a.target.src.endsWith("jpeg")&&!a.target.src.endsWith("jpg")&&(a.target.src=ro,a.target.classList.add("hover"))},Fe=a=>{!a.target.src.endsWith("jpeg")&&!a.target.src.endsWith("jpg")&&(a.target.src=g),a.target.classList.remove("hover")},be=_(0);async function je(a,o){const e=new FormData;a.type?(e.append("file",a,"Cover"),e.append("orthImageString",JSON.stringify({patientId:z,apmtId:E,orthImageList:[]}))):e.append("orthImageString",JSON.stringify({patientId:z,apmtId:E,orthImageList:[{ljUrl:a.imgUrl,ljId:a.id,LJCreateDatetime:a.timestamp}]}));const i=await M("/prod-api/business/orthImage/handleSingleImage",e,!0);i.code==200&&i.data[0].fileUrl?o.fileUrl=i.data[0].fileUrl:(o.fileUrl=g,be.value==0?(be.value++,j({message:"拖拽失败，请再试一次",type:"warning"})):j({message:"拖拽失败，请联系管理员",type:"warning"}))}const Re=(a,o)=>{if(o.hasImage)w.value[0].orthTitleList.forEach(e=>{a!==e&&(e.popVisible=!1)}),a.popVisible=!a.popVisible;else return},Ae=a=>{if(!a.submitAble)return;let o={apmtId:E,titleId:a.id,optionsIdStr:[],otherContent:"",cephalometricsContent:"",fdiToothCode:a.toothCode.join(),showPosition:JSON.stringify(a.position)};M("/prod-api/business/optionsResult",o).then(()=>{a.submitAble=!1})},ke=(a,o)=>{so(a,o,"",E)},We=(a,o)=>{co(a,o)};async function qe(){B.value=!1,O.value.forEach(e=>e.reminder=!1);const o=O.value.filter(e=>e.fileUrl!==g).map(e=>({imageType:e.caption,imageUrl:e.fileUrl}));M("/prod-api/business/orthImage",{apmtId:E,orthImageList:o}).then(e=>{e.code==200&&Je()})}function Je(){ne(),ie(),he()}const Ge=()=>{O.value.forEach(a=>a.reminder=!1)};return(a,o)=>{const e=ao,i=ho,l=to,p=no,U=po,J=fo,P=uo,Ze=lo,He=Qe;return n(),c(f,null,[r("div",Vo,[r("div",xo,[V(Le,{text:"临床检查",backgroundColor:"#f4f7fd"}),r("div",Oo,[(n(!0),c(f,null,I(ae.value.orthTitleList,t=>(n(),c(f,{key:t.id},[t.titleName!=="关节弹响"&&t.titleName!=="侧关节"?(n(),m(F,{key:0,label:t.titleName,width:"100px"},{default:u(()=>[t.type==1?(n(),m(p,{key:0,modelValue:t.optionId,"onUpdate:modelValue":s=>t.optionId=s,onChange:s=>S(t.optionId,t)},{default:u(()=>[(n(!0),c(f,null,I(t.orthOptionsList,(s,d)=>(n(),c(f,{key:s.id},[s.optionSuffix?(n(),m(l,{key:1,"popper-class":"myPopper","popper-style":{width:"auto","min-width":"100px"},placement:"top-start",width:200,visible:s.visible,onShow:h=>a.showPopover(d-2)},{reference:u(()=>[V(e,{class:L({serious:s.serious=="1",checked:s.choosen===!0}),label:s.id,onMouseenter:h=>a.handleMouseEnter(s),onMouseleave:h=>a.handleMouseLeave(s)},{default:u(()=>[C(y(s.optionName),1),(n(),c("svg",Do,[r("g",null,[r("path",{d:"M0,4.99999C0,2.23857,2.23857,0,4.99999,0C7.76141,0,9.99998,2.23857,9.99998,4.99999C9.99998,7.76141,7.76141,9.99998,4.99999,9.99998C2.23857,9.99998,0,7.76141,0,4.99999C0,4.99999,0,4.99999,0,4.99999ZM5.49999,3.49999C5.49999,3.49999,5.49999,2.49999,5.49999,2.49999C5.49999,2.49999,4.49999,2.49999,4.49999,2.49999C4.49999,2.49999,4.49999,3.49999,4.49999,3.49999C4.49999,3.49999,5.49999,3.49999,5.49999,3.49999C5.49999,3.49999,5.49999,3.49999,5.49999,3.49999ZM4.49999,3.99999C4.49999,3.99999,4.49999,7.49998,4.49999,7.49998C4.49999,7.49998,5.49999,7.49998,5.49999,7.49998C5.49999,7.49998,5.49999,3.99999,5.49999,3.99999C5.49999,3.99999,4.49999,3.99999,4.49999,3.99999C4.49999,3.99999,4.49999,3.99999,4.49999,3.99999Z","fill-rule":"evenodd",fill:s.clicked?s.seriousColor:s.hover?s.hoverColor:s.fillColor,"fill-opacity":"1"},null,8,So)])]))]),_:2},1032,["class","label","onMouseenter","onMouseleave"])]),default:u(()=>{var h;return[V(i,{maxlength:"2",ref_for:!0,ref:a.inputRefs[d-2],modelValue:s.otherContent,"onUpdate:modelValue":v=>s.otherContent=v,onBlur:v=>a.handleSubmitContent(t.optionId,t,s),class:L({borderless:s.otherContent})},null,8,["modelValue","onUpdate:modelValue","onBlur","class"]),C(y((h=s.optionSuffix)==null?void 0:h.substr(-1)),1)]}),_:2},1032,["visible","onShow"])):(n(),m(e,{key:0,class:L({serious:s.serious=="1"}),label:s.id},{default:u(()=>[C(y(s.optionName),1)]),_:2},1032,["class","label"]))],64))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):N("",!0),t.type==2?(n(),m(J,{key:1,modelValue:t.optionId,"onUpdate:modelValue":s=>t.optionId=s,onChange:s=>S(t.optionId,t)},{default:u(()=>[(n(!0),c(f,null,I(t.orthOptionsList,s=>(n(),m(U,{class:L({serious:s.serious=="1",checked:s.choosen===!0}),key:s.id,label:s.id},{default:u(()=>[C(y(s.optionName)+" ",1),s.serious=="0"?(n(),c("img",To)):(n(),c("img",$o))]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):N("",!0),t.optionId.constructor===Array&&t.optionId.includes(9)||t.optionId==9?(n(),m(i,{key:2,placeholder:"请输入",modelValue:t.otherContent,"onUpdate:modelValue":s=>t.otherContent=s,onBlur:s=>ke(t.optionId,t)},null,8,["modelValue","onUpdate:modelValue","onBlur"])):N("",!0)]),_:2},1032,["label"])):N("",!0),t.titleName=="关节弹响"?(n(),c("div",Po,[r("div",Mo,y(t.titleName),1),V(p,{class:"specialRadio",modelValue:t.optionId,"onUpdate:modelValue":s=>t.optionId=s,onChange:s=>S(t.optionId,t)},{default:u(()=>[(n(!0),c(f,null,I(t.orthOptionsList,s=>(n(),m(e,{class:L({serious:s.serious=="1",checked:s.choosen===!0}),key:s.id,label:s.id},{default:u(()=>[C(y(s.optionName),1)]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):N("",!0)],64))),128))])]),r("div",Bo,[V(Le,{text:"图像分析",backgroundColor:"#EAF0FC"}),r("div",Fo,[jo,(n(!0),c(f,null,I(te.value,t=>(n(),m(Ue,{key:t.id,imageCaption:t.className,class:L({removeBorder:t.className==="90度侧面像"||t.className==="45度侧面像"})},{img:u(()=>[t.imageUrl?(n(),c("img",{key:0,src:t.imageUrl,style:{height:"240px","object-fit":"cover"}},null,8,Ro)):(n(),c("div",{key:1,class:"imageItem__placeholder",onClick:s=>X(t.className)},[r("img",{src:W.value,class:"addPic"},null,8,Wo)],8,Ao))]),content:u(()=>[(n(!0),c(f,null,I(t.orthTitleList,s=>(n(),m(F,{key:s.id,label:s.titleName,width:"120px"},{default:u(()=>[s.type==1?(n(),m(p,{key:0,modelValue:s.optionId,"onUpdate:modelValue":d=>s.optionId=d,onChange:d=>S(s.optionId,s,t.className,t)},{default:u(()=>[(n(!0),c(f,null,I(s.orthOptionsList,d=>(n(),m(e,{disabled:!t.hasImage,class:L({serious:d.serious=="1",checked:d.choosen===!0}),key:d.id,label:d.id},{default:u(()=>[C(y(d.optionName),1)]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):N("",!0),s.type==2?(n(),m(J,{key:1,modelValue:s.optionId,"onUpdate:modelValue":d=>s.optionId=d,onChange:d=>S(s.optionId,s,t.className,t)},{default:u(()=>[(n(!0),c(f,null,I(s.orthOptionsList,d=>(n(),m(U,{disabled:!t.hasImage,class:L({serious:d.serious=="1",checked:d.choosen===!0}),key:d.id,label:d.id},{default:u(()=>[C(y(d.optionName)+" ",1),d.serious=="0"?(n(),c("img",qo)):(n(),c("img",Jo))]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):N("",!0)]),_:2},1032,["label"]))),128))]),_:2},1032,["imageCaption","class"]))),128)),Go,(n(!0),c(f,null,I(le.value,t=>(n(),m(Ue,{key:t.id,imageCaption:t.className,class:L({removeBorder:t.className==="90度侧面像"||t.className==="45度侧面像"})},{img:u(()=>[t.imageUrl?(n(),c("img",{key:0,src:t.imageUrl,style:{height:"240px","object-fit":"cover"}},null,8,Zo)):(n(),c("div",{key:1,class:"imageItem__placeholder",onClick:s=>X(t.className)},[r("img",{src:W.value,class:"addPic"},null,8,zo)],8,Ho))]),content:u(()=>[(n(!0),c(f,null,I(t.orthTitleList,s=>(n(),m(F,{key:s.id,label:s.titleName,width:"120px"},{default:u(()=>[s.type==1?(n(),m(p,{key:0,modelValue:s.optionId,"onUpdate:modelValue":d=>s.optionId=d,onChange:d=>S(s.optionId,s,t.className,t)},{default:u(()=>[(n(!0),c(f,null,I(s.orthOptionsList,d=>(n(),m(e,{disabled:!t.hasImage,class:L({serious:d.serious=="1",checked:d.choosen===!0}),key:d.id,label:d.id},{default:u(()=>[C(y(d.optionName),1)]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):N("",!0),s.type==2?(n(),m(J,{key:1,modelValue:s.optionId,"onUpdate:modelValue":d=>s.optionId=d,onChange:d=>S(s.optionId,s,t.className,t)},{default:u(()=>[(n(!0),c(f,null,I(s.orthOptionsList,d=>(n(),m(U,{disabled:!t.hasImage,class:L({serious:d.serious=="1",checked:d.choosen===!0}),key:d.id,label:d.id},{default:u(()=>[C(y(d.optionName)+" ",1),d.serious=="0"?(n(),c("img",Ko)):(n(),c("img",Qo))]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):N("",!0)]),_:2},1032,["label"]))),128))]),_:2},1032,["imageCaption","class"]))),128)),Xo,(n(!0),c(f,null,I(w.value,t=>(n(),c("div",{key:t.id,class:"placeholderContainer"},[r("div",{class:"image",style:vo({flex:t.imageUrl?"1":"0","min-width":t.imageUrl?"250px":"auto"})},[t.imageUrl?(n(),c("img",{key:0,src:t.imageUrl,style:{width:"100%",cursor:"pointer"},onClick:o[0]||(o[0]=(...s)=>a.handleZoomPanoImage&&a.handleZoomPanoImage(...s))},null,8,Yo)):(n(),c("div",{key:1,class:"imageItem__placeholder",onClick:s=>X(t.className)},[r("img",{src:W.value,class:"addPic"},null,8,os)],8,es))],4),r("div",ss,[r("div",as,[r("div",ts,[(n(!0),c(f,null,I(w.value[0].orthTitleList,(s,d)=>(n(),c(f,{key:s.id},[d<=1?(n(),m(F,{key:0,label:s.titleName,width:"120px"},{default:u(()=>[s.type==1?(n(),m(p,{key:0,modelValue:s.optionId,"onUpdate:modelValue":h=>s.optionId=h,onChange:h=>S(s.optionId,s)},{default:u(()=>[(n(!0),c(f,null,I(s.orthOptionsList,h=>(n(),m(e,{disabled:!w.value[0].hasImage,class:L({serious:h.serious=="1",checked:h.choosen===!0}),key:h.id,label:h.id},{default:u(()=>[C(y(h.optionName),1)]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):N("",!0),s.optionId==136?(n(),m(i,{key:1,placeholder:"请输入",modelValue:s.otherContent,"onUpdate:modelValue":h=>s.otherContent=h,onBlur:h=>ke(s.optionId,s)},null,8,["modelValue","onUpdate:modelValue","onBlur"])):s.type==2?(n(),m(J,{key:2,modelValue:s.optionId,"onUpdate:modelValue":h=>s.optionId=h,onChange:h=>S(s.optionId,s)},{default:u(()=>[(n(!0),c(f,null,I(s.orthOptionsList,h=>(n(),m(U,{disabled:!w.value[0].hasImage,class:L({serious:h.serious=="1",checked:h.choosen===!0}),key:h.id,label:h.id},{default:u(()=>[C(y(h.optionName)+" ",1),h.serious=="0"?(n(),c("img",ns)):(n(),c("img",ls))]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):N("",!0)]),_:2},1032,["label"])):N("",!0)],64))),128))]),r("div",is,[(n(!0),c(f,null,I(w.value[0].orthTitleList,(s,d)=>(n(),c(f,{key:s.id},[d>=2?(n(),m(F,{key:0,label:s.titleName,width:"120px"},{default:u(()=>[V(l,{width:490,visible:s.popVisible,onShow:h=>Ee(s),onAfterLeave:h=>Ae(s)},{reference:u(()=>{var h,v,T,G;return[r("div",{class:"diagramWrapper",onClick:ee(k=>Re(s,w.value[0]),["stop"])},[r("div",ds,[r("div",cs,[r("div",us,y((h=s.topLeft)==null?void 0:h.sort((k,$)=>k.sort-$.sort).map(k=>k.value).join("")),1),r("div",hs,y((v=s.topRight)==null?void 0:v.sort((k,$)=>k.sort-$.sort).map(k=>k.value).join("")),1)]),r("div",ps,[r("div",fs,y((T=s.bottomLeft)==null?void 0:T.sort((k,$)=>k.sort-$.sort).map(k=>k.value).join("")),1),r("div",ms,y((G=s.bottomRight)==null?void 0:G.sort((k,$)=>k.sort-$.sort).map(k=>k.value).join("")),1)])])],8,rs)]}),default:u(()=>[r("div",gs,[r("div",_s,[(n(!0),c(f,null,I(K.value,(h,v)=>(n(),c("div",{key:v,class:L(["symptomBox",{itemAlignRight:v===2||v===4||v===0||v===6,marginTop:v==4||v==5,marginBottom:v==2||v==3,marginRight:v===2||v===4||v===0||v===6,marginLeft:v===1||v===3||v===5||v===7}])},[(n(!0),c(f,null,I(h,(T,G)=>(n(),c("div",{class:L(["symptomItem",{selected:T.active===!0}]),id:T.value,key:G,onClick:ee(k=>We(T,s),["stop"])},y(T.label),11,vs))),128))],2))),128))]),Is,ys])]),_:2},1032,["visible","onShow","onAfterLeave"])]),_:2},1032,["label"])):N("",!0)],64))),128))])])])]))),128))])]),r("div",Cs,[r("span",bs,[V(P,{onClick:o[1]||(o[1]=t=>a.dialogVisible=!1)},{default:u(()=>[C("取消")]),_:1}),V(P,{type:"primary",onClick:a.handleConfirmAddPatient},{default:u(()=>[C(" 确认 ")]),_:1},8,["onClick"])])])]),V(He,{modelValue:B.value,"onUpdate:modelValue":o[3]||(o[3]=t=>B.value=t),title:"影像管理",width:"1183px",onClose:Ge,"close-on-click-modal":!1},{footer:u(()=>[r("span",zs,[V(P,{onClick:o[2]||(o[2]=t=>B.value=!1)},{default:u(()=>[C("取消")]),_:1}),V(P,{type:"primary",onClick:qe},{default:u(()=>[C(" 确定 ")]),_:1})])]),default:u(()=>[r("div",{class:"imageManagement",ref_key:"loadingTarget2",ref:ye},[r("div",ks,[r("div",Ls,[Us,Es,r("div",Ns,[r("div",ws,[V(P,{type:"primary",link:"",icon:Io(yo)},{default:u(()=>[C("上传图片")]),_:1},8,["icon"])]),r("input",{class:"file-upload__input",type:"file",onChange:De,multiple:""},null,32)])]),r("div",Vs,[b.value.length==0?(n(),c("img",xs)):(n(!0),c(f,{key:1},I(b.value,(t,s)=>(n(),c("div",{key:s},[r("div",null,y(t.StartTime.split("T")[0]),1),r("div",Os,[(n(!0),c(f,null,I(t.imageList,d=>(n(),c("div",{class:"item",key:d.id,onMouseenter:h=>d.showFlag=!0,onMouseleave:h=>d.showFlag=!1},[r("div",Ss,[r("img",{style:{display:"block"},class:L(["img",{choose:d.choose===!0}]),src:d.imgUrl,draggable:"true",onDragstart:h=>Pe(d,h),onDragend:Ce,onClick:h=>_e(d)},null,42,Ts),Co(r("img",{src:Xe,style:{position:"absolute",right:"6px",bottom:"6px"},onClick:h=>_e(d)},null,8,$s),[[bo,d.choose===!0]])])],40,Ds))),128))]),!t.file&&s===b.value.length-1?(n(),c("div",{key:0,style:{display:"inline-flex",color:"#4E5969",cursor:"pointer"},onClick:Se},Bs)):N("",!0)]))),128))]),r("div",Fs,[r("span",js,"已选中"+y(ge.value)+"张",1),V(P,{onClick:Te},{default:u(()=>[C("自动分类")]),_:1})])]),r("div",Rs,[As,r("div",Ws,[(n(!0),c(f,null,I(O.value,t=>(n(),c("div",{class:"item",key:t.typeName,onMouseenter:s=>t.showFlag=!0,onMouseleave:s=>t.showFlag=!1},[r("div",Js,[r("img",{class:L(["img",{hover:t.reminder===!0,animate__animated:t.reminder===!0,animate__bounce:t.reminder===!0}]),style:{display:"block"},src:t.fileUrl,onDrop:s=>Me(s,t),onDragover:ee(Be,["prevent"]),onDragleave:Fe,onDragstart:s=>$e(t),onDragend:Ce},null,42,Gs)]),V(Ze,{width:"300","confirm-button-text":"确认",icon:a.WarningFilled,"icon-color":"#FF7D00","cancel-button-text":"取消",title:"确认删除该张图片吗？",onConfirm:s=>ve(t)},{reference:u(()=>[t.showFlag&&!t.fileUrl.startsWith("data:image")?(n(),c("img",Zs)):N("",!0)]),_:2},1032,["icon","onConfirm"]),r("div",Hs,y(t.caption),1)],40,qs))),128))])])],512)]),_:1},8,["modelValue"]),Ks],64)}}},na=Uo(Qs,[["__scopeId","data-v-10425986"]]);export{na as default};
