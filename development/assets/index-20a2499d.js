import{_ as ws,E as xs}from"./base-79fc8291.js";import{H as Ve,f as _e,_ as Ae,a as De,u as we,E as _o,b as co,c as Go,i as Ot,G as Bt,I as Et,d as Ns,e as $s,g as Ts,p as be,h as Vs,j as Ft,k as Zo,l as Us,m as Ss,n as Wt,o as Os,q as Es,r as Ps}from"./flag-264f62ee.js";import{a as To,b as Vo,E as jt}from"./el-button-2048d86c.js";/* empty css                *//* empty css                  *//* empty css                  */import{P as me,_ as Qe,G as Le,E as je,D as Ms,a as io,b as Pt}from"./_plugin-vue_export-helper-f68785c8.js";import{b as As,d as Ds,a as qt,u as Rs,c as Gt,o as t,k as i,n as Z,l as eo,r as Zt,q as F,p as vo,y as Bs,B as y,ai as uo,F as W,m as r,t as V,v as u,V as k,a2 as U,s as b,T as Y,I as ro,ae as go,af as yo,ag as Fs,D as Jt,C as Xt,aj as Ws,a0 as He,a1 as mo,H as lo,ak as js,w as qs,al as Gs,S as Zs,ah as Js,P as Xs}from"./index-cc8a6564.js";import{f as Jo,E as Yt}from"./index-67aa068b.js";import{a as Ys,E as zs}from"./index-120e5951.js";import"./el-tooltip-4ed993c7.js";import{E as Wo}from"./index-3e4e45b5.js";import{p as Hs}from"./pdf1-00d2783f.js";import{f as Qs}from"./formatTime-47d7a857.js";import"./_commonjsHelpers-de833af9.js";const Ks=As({direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},contentPosition:{type:String,values:["left","center","right"],default:"center"},borderStyle:{type:Ds(String),default:"solid"}}),ea=qt({name:"ElDivider"}),oa=qt({...ea,props:Ks,setup(T){const _=T,w=Rs("divider"),g=Gt(()=>w.cssVar({"border-style":_.borderStyle}));return(D,J)=>(t(),i("div",{class:Z([eo(w).b(),eo(w).m(D.direction)]),style:vo(eo(g)),role:"separator"},[D.$slots.default&&D.direction!=="vertical"?(t(),i("div",{key:0,class:Z([eo(w).e("text"),eo(w).is(D.contentPosition)])},[Zt(D.$slots,"default")],2)):F("v-if",!0)],6))}});var ta=ws(oa,[["__file","/home/runner/work/element-plus/element-plus/packages/components/divider/src/divider.vue"]]);const sa=Bs(ta);const aa="/assets/Steps-37dd4960.svg",Io=(T,_,w,g,D)=>{var J,ee,q;if(_.titleName=="关节弹响"){if(((J=_.orthOptionsList.find(G=>G.id==T))==null?void 0:J.optionName)=="弹响"){g.value=!0;return}if(T==10){g.value=!1,_.otherContent="",D.value.orthTitleList.forEach(R=>{R.titleName=="关节弹响"?(R.optionId=10,R.text="",R.selectId=""):R.titleName=="侧关节"&&(R.optionId=[],R.text="",R.showInput=!1,R.selectId1="",R.selectId2="")});const G=D.value.orthTitleList.find(R=>R.titleName=="侧关节");let fe={apmtId:w,titleId:G.id,optionsIdStr:[],otherContent:"",cephalometricsContent:"",fdiToothCode:"",showPosition:""};me("/prod-api/business/optionsResult",fe)}}else if(_.titleName=="骨龄"&&(((ee=_.orthOptionsList.find(G=>G.id==T))==null?void 0:ee.optionName)=="骨龄超"||((q=_.orthOptionsList.find(G=>G.id==T))==null?void 0:q.optionName)=="骨龄晚")){_.orthOptionsList.forEach(G=>{G.id==T?(G.clicked=!0,G.visible=!0):G.clicked=!1});return}_.type==2&&(_.optionId1.includes(10)&&_.optionId1.length<_.optionId.length?(_.optionId1=_.optionId.filter(G=>G!==10),_.optionId=_.optionId1):!_.optionId1.includes(10)&&_.optionId1.length<_.optionId.length&&_.optionId.includes(10)&&(_.optionId1=[10],_.optionId=[10],_.otherContent=""),_.orthOptionsList.forEach(G=>{_.optionId.includes(G.id)?G.choosen=!0:G.choosen=!1})),_.type==1&&(_.orthOptionsList.forEach(G=>{T!==G.id?G.choosen=!1:G.choosen=!0}),(_.titleName=="面中三分之一"||_.titleName=="面下三分之一"||_.titleName=="正貌")&&_.aiFlag=="1"&&(_.aiFlag="0"))};const Uo=T=>(go("data-v-18146a02"),T=T(),yo(),T),na={class:"stepOne"},la={class:"patientInfo"},ia={class:"patientInfo__item"},da=Uo(()=>r("span",{class:"patientInfo__item__desc"},"患者姓名",-1)),ra={class:"patientInfo__item__detail"},ca={class:"patientInfo__item"},ua=Uo(()=>r("span",{class:"patientInfo__item__desc"},"病例号",-1)),ha={class:"patientInfo__item__detail"},pa={class:"patientInfo__item"},fa=Uo(()=>r("span",{class:"patientInfo__item__desc"},"性别",-1)),ma={class:"patientInfo__item__detail"},va={class:"patientInfo__item"},_a=Uo(()=>r("span",{class:"patientInfo__item__desc"},"生日",-1)),ga={class:"patientInfo__item__detail"},ya={class:"content inquiry",style:{"min-height":"600px"}},Ia={class:"innerContent content"},ba={key:0,src:Ae},Ca={key:1,src:De},ka={key:1,style:{display:"flex"}},La={class:"content"},wa={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",fill:`
                              none
                            `,version:"1.1",width:"9.999975204467773",height:"9.999975204467773",viewBox:"0 0 9.999975204467773 9.999975204467773"},xa=["fill"],Na={key:0,src:Ae},$a={key:1,src:De},Ta={key:1,style:{display:"inline-flex"}},Va={class:"specialTitle"},Ua={key:2,style:{display:"inline-flex"}},Sa={class:"specialTitle side"},Oa={__name:"stepOne",props:{pdfId:String},setup(T,{expose:_}){const w=y(!1);_({clicked:w});const g=T,D=y(""),J=y(""),ee=uo(),q=ee.params.appId,G=ee.params.patientId,fe=le=>{le.otherContent&&(le.visible=!0),le.hover=!0};let R;const B=le=>{le.hover=!1,R=setTimeout(()=>{le.visible=!1},300);const j=document.querySelectorAll(".myPopper");Array.from(j).forEach(C=>{C.addEventListener("mouseenter",()=>{clearTimeout(R)})})};async function N(le,j,C){C.visible=!1,C.otherContent?(await we(le,j,C.otherContent,q)).code==200&j.titleName=="骨龄"&&ce():(j.optionId="",ro(()=>{j.orthOptionsList.forEach(ue=>ue.clicked=!1)}))}const m=y({});async function X(){const le=await Le(`prod-api/business/patient/ljPatient/${G}`);m.value=le.data,sessionStorage.setItem("name",m.value.Name)}X();const ve=y([]);async function ge(){const le=await Le(`/prod-api/business/orthClass/list/2/问诊/${q}`);ve.value=le.data,le.data.forEach(j=>j.orthTitleList.forEach(C=>C.showInput=!1)),le.data.forEach(j=>{j.orthTitleList.forEach(C=>{if(C.orthOptionsList[C.orthOptionsList.length-1].otherContent&&(C.otherContent=C.orthOptionsList[C.orthOptionsList.length-1].otherContent),C.type==1){C.optionId="",C.text="",C.showInput=!1;const ue=C.orthOptionsList.filter(K=>K.choosen===!0);ue.length>0&&(C.optionId=ue[0].id)}else if(C.type==2){C.optionId=[],C.optionId1=[],C.text="",C.showInput=!1;const ue=C.orthOptionsList.filter(K=>K.choosen===!0);ue.length>0&&(C.optionId=ue.map(K=>K.id),C.optionId1=C.optionId)}})})}ge();const Ce=y({}),re=y([]);async function ce(){const le=await Le(`/prod-api/business/orthClass/list/2/临床检查/${q}`);Ce.value=le.data[0],le.data.forEach(j=>{j.orthTitleList.forEach(C=>C.showInput=!1)}),le.data.forEach(j=>{j.orthTitleList.forEach(C=>{if(C.orthOptionsList[C.orthOptionsList.length-1].otherContent&&(C.otherContent=C.orthOptionsList[C.orthOptionsList.length-1].otherContent),C.titleName=="关节弹响"){C.optionId="",C.text="",C.showInput=!1,C.selectId="";const ue=C.orthOptionsList.filter(K=>K.choosen===!0);if(ue.length>0){C.optionId=ue[0].id,Ge.value=C.optionId!==10;const K=C.listMap.filter(H=>H.choosen===!0);K.length>0&&(C.selectId=K[0].id)}}else if(C.titleName=="侧关节"){C.optionId=[],C.text="",C.showInput=!1,C.selectId1="",C.selectId2="";const ue=C.orthOptionsList.filter(H=>H.choosen===!0);ue.length>0&&(C.selectId1=ue[0].id);const K=C.listMap.filter(H=>H.choosen===!0);K.length>0&&(C.selectId2=K[0].id)}else if(C.titleName=="骨龄"){C.optionId="",C.text="",C.showInput=!1,C.selectId1="",C.selectId2="",re.value=C.orthOptionsList.filter(K=>K.optionName==="骨龄超"||K.optionName==="骨龄晚").map(()=>y(null)),C.orthOptionsList.forEach(K=>{(K.optionName==="骨龄超"||K.optionName==="骨龄晚")&&(K.fillColor="#C9CDD4",K.seriousColor="#f44c4c",K.hoverColor="#2e6ce4",K.clicked=!!K.choosen,K.visible=!1)});const ue=C.orthOptionsList.filter(K=>K.choosen===!0);ue.length>0&&(C.optionId=ue[0].id)}else if(C.type==1){C.optionId="",C.text="",C.showInput=!1;const ue=C.orthOptionsList.filter(K=>K.choosen===!0);ue.length>0&&(C.optionId=ue[0].id)}else if(C.type==2){C.optionId=[],C.optionId1=[],C.text="",C.showInput=!1;const ue=C.orthOptionsList.filter(K=>K.choosen===!0);ue.length>0&&(C.optionId=ue.map(K=>K.id),C.optionId1=C.optionId)}})})}ce();const Ge=y(!1);async function Ee(le,j){w.value=!0,g.pdfId&&sessionStorage.removeItem(g.pdfId),Io(le,j,q,Ge,Ce),(await we(j.optionId,j,"",q)).code==200&j.titleName=="骨龄"}const z=le=>{re.value[le].value[0].input.value||re.value[le].value[0].focus()};async function ke(le,j){if(j.titleName=="关节弹响"){let C={apmtId:q,titleId:j.id,optionsIdStr:[le.optionId,le.selectId],otherContent:"",cephalometricsContent:"",fdiToothCode:"",showPosition:""};await me("/prod-api/business/optionsResult",C)}if(j.titleName=="侧关节"){let C={apmtId:q,titleId:j.id,optionsIdStr:le.selectId2==""?[le.selectId1]:[le.selectId1,le.selectId2],otherContent:"",cephalometricsContent:"",fdiToothCode:"",showPosition:""};await me("/prod-api/business/optionsResult",C)}}const Pe=(le,j)=>{we(le,j,"",q)};return(le,j)=>{const C=Jo,ue=_o,K=co,H=To,Re=Vo,Je=Go,O=Ys,S=zs;return t(),i("div",na,[W(Ve,{text:"患者信息",backgroundColor:"#f4f7fd"}),r("div",la,[r("div",ia,[da,r("span",ra,V(m.value.Name),1)]),r("div",ca,[ua,r("span",ha,V(m.value.PrivateId),1)]),r("div",pa,[fa,r("span",ma,V(m.value.Sex===1?"男":m.value.Sex===2?"女":"未知"),1)]),r("div",va,[_a,r("span",ga,V(m.value.age),1)])]),W(Ve,{text:"问诊",backgroundColor:"#f4f7fd"}),r("div",ya,[W(_e,{label:"主诉",width:"58px"},{default:u(()=>[W(C,{modelValue:D.value,"onUpdate:modelValue":j[0]||(j[0]=d=>D.value=d)},null,8,["modelValue"])]),_:1}),W(_e,{label:"现病史",width:"58px"},{default:u(()=>[W(C,{modelValue:J.value,"onUpdate:modelValue":j[1]||(j[1]=d=>J.value=d)},null,8,["modelValue"])]),_:1}),(t(!0),i(k,null,U(ve.value,d=>(t(),i(k,{key:d.id},[d.className?(t(),b(_e,{key:0,label:d.className,class:"specialFormItem"},{default:u(()=>[r("div",Ia,[(t(!0),i(k,null,U(d.orthTitleList,a=>(t(),b(_e,{label:a.titleName,width:"100px",key:a.id},{default:u(()=>[a.type==1?(t(),b(K,{key:0,modelValue:a.optionId,"onUpdate:modelValue":h=>a.optionId=h,onChange:h=>Ee(a.optionId,a)},{default:u(()=>[(t(!0),i(k,null,U(a.orthOptionsList,h=>(t(),b(ue,{class:Z({serious:h.serious=="1",checked:h.choosen===!0}),key:h.id,label:h.id},{default:u(()=>[Y(V(h.optionName),1)]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0),a.type==2?(t(),b(Re,{key:1,modelValue:a.optionId,"onUpdate:modelValue":h=>a.optionId=h,onChange:h=>Ee(a.optionId,a)},{default:u(()=>[(t(!0),i(k,null,U(a.orthOptionsList,h=>(t(),b(H,{class:Z({serious:h.serious=="1",checked:h.choosen===!0}),key:h.id,label:h.id},{default:u(()=>[Y(V(h.optionName)+" ",1),h.serious=="0"?(t(),i("img",ba)):(t(),i("img",Ca))]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0),a.optionId.constructor===Array&&a.optionId.includes(9)||a.optionId==9?(t(),b(C,{key:2,placeholder:"请输入",modelValue:a.otherContent,"onUpdate:modelValue":h=>a.otherContent=h,onBlur:h=>Pe(a.optionId,a)},null,8,["modelValue","onUpdate:modelValue","onBlur"])):F("",!0)]),_:2},1032,["label"]))),128))])]),_:2},1032,["label"])):(t(),i("div",ka,[(t(!0),i(k,null,U(d.orthTitleList,a=>(t(),b(_e,{label:a.titleName,width:"100px",key:a.id},{default:u(()=>[W(K,{modelValue:a.optionId,"onUpdate:modelValue":h=>a.optionId=h,onChange:h=>Ee(a.optionId,a)},{default:u(()=>[(t(!0),i(k,null,U(a.orthOptionsList,h=>(t(),b(ue,{key:h.id,label:h.id,class:Z({serious:h.serious=="1",checked:h.choosen===!0})},{default:u(()=>[Y(V(h.optionName),1)]),_:2},1032,["label","class"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"]))),128))]))],64))),128))]),W(Ve,{text:"临床检查",backgroundColor:"#f4f7fd"}),r("div",La,[(t(!0),i(k,null,U(Ce.value.orthTitleList,d=>(t(),i(k,{key:d.id},[d.titleName!=="关节弹响"&&d.titleName!=="侧关节"?(t(),b(_e,{key:0,label:d.titleName,width:"100px"},{default:u(()=>[d.type==1?(t(),b(K,{key:0,modelValue:d.optionId,"onUpdate:modelValue":a=>d.optionId=a,onChange:a=>Ee(d.optionId,d)},{default:u(()=>[(t(!0),i(k,null,U(d.orthOptionsList,(a,h)=>(t(),i(k,{key:a.id},[a.optionSuffix?(t(),b(Je,{key:1,"popper-class":"myPopper","popper-style":{width:"auto","min-width":"100px"},placement:"top-start",width:200,visible:a.visible,onShow:he=>z(h-2)},{reference:u(()=>[W(ue,{class:Z({serious:a.serious=="1",checked:a.choosen===!0}),label:a.id,onMouseenter:he=>fe(a),onMouseleave:he=>B(a)},{default:u(()=>[Y(V(a.optionName),1),(t(),i("svg",wa,[r("g",null,[r("path",{d:"M0,4.99999C0,2.23857,2.23857,0,4.99999,0C7.76141,0,9.99998,2.23857,9.99998,4.99999C9.99998,7.76141,7.76141,9.99998,4.99999,9.99998C2.23857,9.99998,0,7.76141,0,4.99999C0,4.99999,0,4.99999,0,4.99999ZM5.49999,3.49999C5.49999,3.49999,5.49999,2.49999,5.49999,2.49999C5.49999,2.49999,4.49999,2.49999,4.49999,2.49999C4.49999,2.49999,4.49999,3.49999,4.49999,3.49999C4.49999,3.49999,5.49999,3.49999,5.49999,3.49999C5.49999,3.49999,5.49999,3.49999,5.49999,3.49999ZM4.49999,3.99999C4.49999,3.99999,4.49999,7.49998,4.49999,7.49998C4.49999,7.49998,5.49999,7.49998,5.49999,7.49998C5.49999,7.49998,5.49999,3.99999,5.49999,3.99999C5.49999,3.99999,4.49999,3.99999,4.49999,3.99999C4.49999,3.99999,4.49999,3.99999,4.49999,3.99999Z","fill-rule":"evenodd",fill:a.clicked?a.seriousColor:a.hover?a.hoverColor:a.fillColor,"fill-opacity":"1"},null,8,xa)])]))]),_:2},1032,["class","label","onMouseenter","onMouseleave"])]),default:u(()=>{var he;return[W(C,{maxlength:"2",ref_for:!0,ref:re.value[h-2],modelValue:a.otherContent,"onUpdate:modelValue":Ie=>a.otherContent=Ie,onBlur:Ie=>N(d.optionId,d,a),class:Z({borderless:a.otherContent})},null,8,["modelValue","onUpdate:modelValue","onBlur","class"]),Y(V((he=a.optionSuffix)==null?void 0:he.substr(-1)),1)]}),_:2},1032,["visible","onShow"])):(t(),b(ue,{key:0,class:Z({serious:a.serious=="1"}),label:a.id},{default:u(()=>[Y(V(a.optionName),1)]),_:2},1032,["class","label"]))],64))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0),d.type==2?(t(),b(Re,{key:1,modelValue:d.optionId,"onUpdate:modelValue":a=>d.optionId=a,onChange:a=>Ee(d.optionId,d)},{default:u(()=>[(t(!0),i(k,null,U(d.orthOptionsList,a=>(t(),b(H,{class:Z({serious:a.serious=="1",checked:a.choosen===!0}),key:a.id,label:a.id},{default:u(()=>[Y(V(a.optionName)+" ",1),a.serious=="0"?(t(),i("img",Na)):(t(),i("img",$a))]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0),d.optionId.constructor===Array&&d.optionId.includes(9)||d.optionId==9?(t(),b(C,{key:2,placeholder:"请输入",modelValue:d.otherContent,"onUpdate:modelValue":a=>d.otherContent=a,onBlur:a=>Pe(d.optionId,d)},null,8,["modelValue","onUpdate:modelValue","onBlur"])):F("",!0)]),_:2},1032,["label"])):F("",!0),d.titleName=="关节弹响"?(t(),i("div",Ta,[r("div",Va,V(d.titleName),1),W(K,{class:"specialRadio",modelValue:d.optionId,"onUpdate:modelValue":a=>d.optionId=a,onChange:a=>Ee(d.optionId,d)},{default:u(()=>[(t(!0),i(k,null,U(d.orthOptionsList,a=>(t(),b(ue,{class:Z({serious:a.serious=="1",checked:a.choosen===!0}),key:a.id,label:a.id},{default:u(()=>[Y(V(a.optionName),1)]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),Ge.value?(t(),b(S,{key:0,modelValue:d.selectId,"onUpdate:modelValue":a=>d.selectId=a,class:"specialSelect",onChange:a=>ke(d,d)},{default:u(()=>[(t(!0),i(k,null,U(d.listMap,a=>(t(),b(O,{key:a.id,label:a.optionName,value:a.id},{default:u(()=>[Y(V(a.optionName),1)]),_:2},1032,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0)])):F("",!0),Ge.value&&d.titleName=="侧关节"?(t(),i("div",Ua,[r("div",Sa,V(d.titleName),1),W(S,{modelValue:d.selectId1,"onUpdate:modelValue":a=>d.selectId1=a,class:"specialSelect",onChange:a=>ke(d,d)},{default:u(()=>[(t(!0),i(k,null,U(d.orthOptionsList,a=>(t(),b(O,{key:a.id,label:a.optionName,value:a.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"]),W(S,{modelValue:d.selectId2,"onUpdate:modelValue":a=>d.selectId2=a,class:"specialSelect",onChange:a=>ke(d,d)},{default:u(()=>[(t(!0),i(k,null,U(d.listMap,a=>(t(),b(O,{key:a.id,label:a.optionName,value:a.id},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])):F("",!0)],64))),128))])])}}},Ea=Qe(Oa,[["__scopeId","data-v-18146a02"]]),Pa="/assets/arrange-8ba5d6cc.svg",Ma="/assets/AIFlagForFront-be72ba22.svg",Aa="/assets/AI-1752b7a7.svg",Da="/assets/downwards-554b1728.svg",Ra="/assets/upwards-d82d8d75.svg",Ba="/assets/close-3d4ba752.svg";function $o(T,_){let w;T.includes("-")?w=T.split("-").filter(m=>m!=="-"):w=T.split("");const g=_.find(m=>w[0]==="Na"?m.label=="N":m.label==w[0]),D=_.find(m=>m.label==w[1]),J=_.find(m=>m.label==w[2]),ee={x:D.x-g.x,y:D.y-g.y},q={x:J.x-D.x,y:J.y-D.y},G=Math.sqrt(ee.x*ee.x+ee.y*ee.y),fe=Math.sqrt(q.x*q.x+q.y*q.y),R=ee.x*q.x+ee.y*q.y;return 180-Math.acos(R/(G*fe))*180/Math.PI}function Ro(T,_){const w=T.split("/"),g=w[0],D=w[1],J=Mt(g,_),ee=Mt(D,_);return J/(ee!==0?ee:1)*100}function Mt(T,_){let w;T.includes("-")?w=T.split("-").filter(G=>G!=="-"):w=T.split("");const g=_.find(G=>G.label==w[0]),D=_.find(G=>G.label==w[1]),J=D.x-g.x,ee=D.y-g.y;return Math.sqrt(J*J+ee*ee)}function Bo(T,_){let w,g,D,J;T=="U1-SN"&&(w=_.find(m=>m.label=="UI"),g=_.find(m=>m.label=="UI_1"),D=_.find(m=>m.label=="S"),J=_.find(m=>m.label=="N")),T=="SN-MP"&&(w=_.find(m=>m.label=="S"),g=_.find(m=>m.label=="N"),D=_.find(m=>m.label=="Go_1"),J=_.find(m=>m.label=="Me")),T=="L1-MP"&&(w=_.find(m=>m.label=="LI"),g=_.find(m=>m.label=="LI_1"),D=_.find(m=>m.label=="Go_1"),J=_.find(m=>m.label=="Me")),T=="FH-MP"&&(w=_.find(m=>m.label=="P"),g=_.find(m=>m.label=="Or"),D=_.find(m=>m.label=="Go_1"),J=_.find(m=>m.label=="Me")),T=="ODI"&&(w=_.find(m=>m.label=="A"),g=_.find(m=>m.label=="B"),D=_.find(m=>m.label=="Go"),J=_.find(m=>m.label=="Gn"),console.log(w,g,D,J)),T=="APDIAngle1"&&(w=_.find(m=>m.label=="N"),g=_.find(m=>m.label=="P"),D=_.find(m=>m.label=="P"),J=_.find(m=>m.label=="Or")),T=="APDIAngle2"&&(w=_.find(m=>m.label=="A"),g=_.find(m=>m.label=="B"),D=_.find(m=>m.label=="N"),J=_.find(m=>m.label=="P"));const ee={x:g.x-w.x,y:g.y-w.y},q={x:J.x-D.x,y:J.y-D.y},G=ee.x*q.x+ee.y*q.y,fe=Math.sqrt(ee.x**2+ee.y**2),R=Math.sqrt(q.x**2+q.y**2);return Math.acos(G/(fe*R))*(180/Math.PI)}function At(T,_,w){const g={x:w.x-_.x,y:w.y-_.y},D={x:T.x-_.x,y:T.y-_.y},J=(D.x*g.x+D.y*g.y)/(g.x*g.x+g.y*g.y),ee=_.x+J*g.x,q=_.y+J*g.y;return{x:ee,y:q}}function jo(T,_,w,g,D,J,ee){console.log(T,_,w,g,D,J);const q={x:(D.x+J.x)/2,y:(D.y+J.y)/2},G={x:(w.x+g.x)/2,y:(w.y+g.y)/2},fe=At(T,q,G),R=At(_,q,G),B=R.x-fe.x,N=R.y-fe.y,m=Math.sqrt(B*B+N*N);return R.x>fe.x?m*20/ee:-m*20/ee}jo({x:1,y:2},{x:-1,y:-2},{x:2,y:1},{x:2,y:-1},{x:-2,y:-1},{x:-2,y:1});function Fo(T,_,w){const g=Math.sqrt(Math.pow(_.x-w.x,2)+Math.pow(_.y-w.y,2)),D={x:_.x-T.x,y:_.y-T.y},J={x:w.x-T.x,y:w.y-T.y};return Math.abs((D.x*J.y-D.y*J.x)/g)}function qo(T,_){const w=_.x-T.x,g=_.y-T.y;return Math.sqrt(w*w+g*g)}function Dt(T){const _=T.find(g=>g.label=="forehead_center"),w=T.find(g=>g.label=="chin_2");return qo(_,w)/3}const Se=T=>(go("data-v-874a6a6d"),T=T(),yo(),T),Fa={class:"stepTwo"},Wa=Se(()=>r("img",{src:Pa},null,-1)),ja={class:"content",style:{"min-height":"700px"}},qa={key:0,id:"FrontalRose",width:"320",height:"240"},Ga={key:1,style:{height:"240px","object-fit":"cover","max-width":"320px"}},Za=["onClick"],Ja=["src"],Xa={class:"aiFlagImg",src:Ma},Ya={key:0,src:Ae},za={key:1,src:De},Ha={class:"content mouth"},Qa={key:0,style:{width:"320px",height:"240px","object-fit":"cover","border-radius":"10px"}},Ka=["onClick"],en=["src"],on=["src"],tn={key:0,src:Ae},sn={key:1,src:De},an={class:"content panoramic"},nn=["src"],ln=["onClick"],dn=["src"],rn={class:"imageItem__content specialComponent",style:{"min-width":"780px"}},cn={class:"container"},un={class:"left-column"},hn={key:0,src:Ae},pn={key:1,src:De},fn={class:"right-column"},mn={key:0,src:Ae},vn={key:1,src:De},_n={class:"leftLower-column"},gn=["onClick"],yn={class:"diagram"},In={class:"diagramBox"},bn={class:"toothItem1"},Cn={class:"toothItem2"},kn={class:"diagramBox"},Ln={class:"toothItem3"},wn={class:"toothItem4"},xn={class:"selectContainer",id:"selectContainer"},Nn={class:"container"},$n=["id","onClick"],Tn=Se(()=>r("div",{class:"left"},"右",-1)),Vn=Se(()=>r("div",{class:"right"},"左",-1)),Un={class:"leftLower-column"},Sn=["onClick"],On={class:"diagram"},En={class:"diagramBox"},Pn={class:"toothItem1"},Mn={class:"toothItem2"},An={class:"diagramBox"},Dn={class:"toothItem3"},Rn={class:"toothItem4"},Bn={class:"selectContainer",id:"selectContainer"},Fn={class:"container"},Wn=["id","onClick"],jn=Se(()=>r("div",{class:"left"},"右",-1)),qn=Se(()=>r("div",{class:"right"},"左",-1)),Gn={class:"placeholderContainer"},Zn=["src"],Jn={class:"imageItem__content specialComponent cephalometric",style:{"min-width":"800px"}},Xn={key:0,class:"formItem"},Yn=["onMouseenter"],zn=Se(()=>r("img",{src:Zo},null,-1)),Hn={class:"formItem__content"},Qn={style:{width:"100px",display:"flex","align-items":"center"}},Kn={src:Da},el={src:Ra},ol={key:1,class:"formItem"},tl={class:"formItem__label"},sl=Se(()=>r("img",{src:Zo},null,-1)),al={class:"formItem__content"},nl={class:"imageManagement__images subSection"},ll={class:"title"},il=Se(()=>r("div",{class:"title__left"},"图库",-1)),dl=Se(()=>r("div",{class:"title__middle"},[r("img",{src:Us,style:{"margin-right":"4px"}}),Y(" 可直接拖拽照片到右侧指定位置或点击下方一键“自动分类”哦～ ")],-1)),rl={class:"title__right file-upload"},cl={class:"file-upload__label"},ul={style:{"padding-left":"14px","padding-bottom":"50px","padding-top":"50px"}},hl={key:0,class:"imgContainer__empty",src:$s},pl={class:"imgContainer"},fl=["onMouseenter","onMouseleave"],ml={style:{position:"relative",border:"1px solid #e5e6eb","border-radius":"12px"}},vl=["src","onDragstart","onClick"],_l=["onClick"],gl=Se(()=>r("span",null,"加载上次影像",-1)),yl=Se(()=>r("img",{src:Ss},null,-1)),Il=[gl,yl],bl={class:"classifyWrapper"},Cl={style:{"margin-right":"6px"}},kl={class:"imageManagement__classify subSection"},Ll=Se(()=>r("div",{class:"title"},"分类",-1)),wl={class:"imageWrapper"},xl=["onMouseenter","onMouseleave"],Nl={style:{position:"relative",border:"1px solid #e5e6eb","border-radius":"12px",overflow:"hidden",height:"80px"}},$l=["src","onDrop","onDragover","onDragstart"],Tl={key:0,style:{cursor:"pointer"},class:"deleteImage",src:Ts},Vl={class:"item__caption"},Ul={class:"dialog-footer"},Sl=Se(()=>r("div",{class:"overlay__header"},null,-1)),Ol=Se(()=>r("div",{class:"overlay__mask"},null,-1)),El=["src"],Pl=Se(()=>r("img",{id:"img",style:{opacity:0}},null,-1)),Rt=665/390,Ml={__name:"stepTwo",props:{pdfId:String},setup(T,{expose:_}){const w=uo(),g=w.params.appId,D=w.params.patientId;Fs(()=>{const e=document.createElement("link");e.href=Ot,e.rel="preload",e.as="image",document.head.appendChild(e)});const J=y(!1);_({clicked:J});const ee=T,q=y(!1),G=()=>{oo.value.style.display="flex",q.value=!0},fe=()=>{oo.value.style.display="none",q.value=!1},R=y(window.innerWidth-900),B=y((R.value/Rt).toFixed(2));window.addEventListener("resize",()=>{if(window.innerWidth<1080)return;document.getElementById("myCanvas")&&(R.value=window.innerWidth-900,B.value=(R.value/Rt).toFixed(2),Q.value=$e.value.map(s=>({label:s.label,x:s.x*R.value,y:s.y*B.value})),no(R.value,B.value,!0))});const N=y([]),m=e=>{N.value.forEach(s=>{s.forEach(o=>{var n;o.active=!1,(n=e.toothCode)!=null&&n.includes(o.value+"")&&(o.active=!0)})})},X=(e,s)=>{Wt(e,s)},ve=y([]),ge=y([]),Ce=new FormData;N.value=Bt();const re=y(!1),ce=e=>{const s=e.target.files;if(s.length>16)e.preventDefault(),je("最多上传16张图片");else{for(let o=0;o<s.length;o++){const n=s[o];if(Ce.append("files",n),n){const l=new FileReader;l.onload=()=>{ve.value.push(l.result),ge.value.push({imgUrl:l.result,showFlag:!1,choose:!0,file:n})},l.readAsDataURL(n)}}re.value?j.value[0].imageList=ge.value:(j.value.unshift({file:!0,StartTime:"2023-8-14",imageList:ge.value}),re.value=!0)}},Ge=e=>{e.measured=!0,e.cephalometricsContent!==e.AIValue&&(e.aiFlag="0");let s={apmtId:g,titleId:e.id,optionsIdStr:[],otherContent:"",cephalometricsContent:e.cephalometricsContent?e.cephalometricsContent:"",fdiToothCode:"",showPosition:""};me("/prod-api/business/optionsResult",s).then(o=>{if(o.code==200&&o.data.optionsId){e.optionId=o.data.optionsId;let n={apmtId:g,titleId:e.id,optionsIdStr:[o.data.optionsId],otherContent:"",cephalometricsContent:"",fdiToothCode:"",showPosition:""};e.inputVal=e.cephalometricsContent,me("/prod-api/business/optionsResult",n),me("/prod-api/business/optionsResult/updateAIType",{apmtId:g,cephalometricsList:[{titleId:e.id,aiType:2}]})}else o.code==500&&o.msg&&(e.cephalometricsContent=e.inputVal,je({type:"error",message:o.msg}))})},Ee=()=>{},z=Gt(()=>{let e=0;return j.value.forEach(s=>{s.imageList.forEach(o=>{o.choose&&e++})}),e}),ke=e=>{e.choose=!e.choose},Pe=e=>{e.id?Ms(`/prod-api/business/orthImage/${e.id}`).then(s=>{if(s.code==200){const o=H.value.find(n=>e==n);o.fileUrl=be,o.id=void 0}}):e.fileUrl=be},le=y(0),j=y([]),C=y([]),ue=()=>{ao.value=!0,H.value.forEach(e=>{e.fileUrl=be}),Mo()},K=()=>{if(j.value.length<C.value.length){C.value[j.value.length].imageList.forEach(s=>{s.imgUrl=s.fileUrl});const e=C.value.slice(le.value+1).find(s=>s.imageList.length!==0);e?(j.value.push(e),le.value=C.value.findIndex(s=>s==j.value[j.value.length-1]),j.value[j.value.length-1].imageList.forEach(s=>{s.imgUrl=s.fileUrl})):je("没有更多图像了哦")}},H=y([{caption:"正面像",typeName:"FrontalRepose",fileUrl:be},{caption:"正面微笑像",typeName:"FrontalSmile",fileUrl:be},{caption:"90度侧面像",typeName:"LeftProfile",fileUrl:be},{caption:"90度侧面微笑像",typeName:"RightProfile",fileUrl:be},{caption:"45度侧面像",typeName:"LeftSideProfile",fileUrl:be},{caption:"45度侧面微笑像",typeName:"RightSideProfile",fileUrl:be},{caption:"口内照（左侧）",typeName:"",fileUrl:be},{caption:"口内照（右侧）",typeName:"",fileUrl:be},{caption:"磨牙关系（左侧）",typeName:"Left",fileUrl:be},{caption:"磨牙关系（右侧）",typeName:"Right",fileUrl:be},{caption:"正面咬合",typeName:"Anterior",fileUrl:be},{caption:"前牙覆盖",typeName:"Cover",fileUrl:be},{caption:"上颌",typeName:"Upper",fileUrl:be},{caption:"下颌",typeName:"Lower",fileUrl:be},{caption:"全景片",typeName:"Panoramic",fileUrl:be},{caption:"侧位片",typeName:"Cephalometric",fileUrl:be}]);async function Re(){let e;const s=await Pt({url:"http://47.101.150.34:8177/bonceph/platform/user/login",method:"post",data:{username:"bonceph",userpwd:"4371f7b311bf4f88cbd27855f3143430"}});return s.status==200&&(e=s.data.data.token),e}const Je=y(!1),O=y();async function S(){if(z.value==0)je({message:"未选中图片",type:"error"});else{const e=Wo.service({lock:!0,text:"正在分类中",background:"rgba(0, 0, 0, 0.7)",target:O.value});e.value=!0;const s=new FormData;let o,n;j.value.filter(f=>f.file===void 0).forEach(f=>{n=f.imageList.filter(L=>L.choose===!0).map(L=>{if(L.choose)return{ljUrl:L.imgUrl,ljId:L.id,LJCreateDatetime:L.timestamp}})}),o=JSON.stringify({patientId:D,apmtId:g,orthImageList:n}),j.value.filter(f=>f.file===!0).length>0?j.value.filter(f=>f.file===!0)[0].imageList.filter(f=>f.choose===!0).forEach(f=>{s.append("files",f.file)}):s.append("files",null),s.append("orthImageString",o);const l=await me("/prod-api/business/orthImage/handleMultiImage",s,!0);e.close(),l.code===200&&(j.value.forEach(f=>f.imageList.forEach(L=>L.choose=!1)),l.data.forEach(f=>{H.value.forEach(L=>{f.typeName==L.typeName&&(L.fileUrl=f.fileUrl,L.imageId=f.fileId)})}))}}const d=y(null),a=y(),h=e=>{d.value=e,d.value.rightDrop=!0,a.value=d.value.fileUrl;const s=document.getElementById("img");s.src=e.fileUrl,s.style.opacity=1,s.width=120,s.height=80,s.style.position="absolute",s.style.top="-9999px",s.style.objectFit="cover",s.style.border="2px solid #2E6CE4",s.style.boxShadow="0px 9px 18px 0px rgba(0, 0, 0, 0.57)",event.dataTransfer.setDragImage(s,60,40)},he=(e,s)=>{e.file?(s.dataTransfer.setData("text/plain",e),d.value=s.dataTransfer.files[0]):d.value=e;const o=document.getElementById("img");o.src=e.imgUrl,o.style.opacity=1,o.width=120,o.height=80,o.style.position="absolute",o.style.top="-9999px",o.style.objectFit="cover",o.style.border="2px solid #2E6CE4",o.style.boxShadow="0px 9px 18px 0px rgba(0, 0, 0, 0.57)",s.dataTransfer.setDragImage(o,60,40)},Ie=()=>{const e=document.getElementById("img");e.style.opacity=0},ye=(e,s)=>{const o=document.getElementById("img");if(o.style.opacity=0,e.target.classList.remove("hover"),!d.value.rightDrop)x(d.value,s);else{if(d.value.id)Pe(d.value);else{const n=H.value.find(l=>d.value.fileUrl==l.fileUrl);n.fileUrl=be}s.id?io("/prod-api/business/orthImage",{id:s.id,imageUrl:a.value}).then(()=>{Mo()}):s.fileUrl=a.value}},pe=y(0);async function x(e,s){const o=new FormData;e.type?(o.append("file",e,"Cover"),o.append("orthImageString",JSON.stringify({patientId:D,apmtId:g,orthImageList:[]}))):o.append("orthImageString",JSON.stringify({patientId:D,apmtId:g,orthImageList:[{ljUrl:e.imgUrl,ljId:e.id,LJCreateDatetime:e.timestamp}]}));const n=await me("/prod-api/business/orthImage/handleSingleImage",o,!0);n.code==200&&n.data[0].fileUrl?(s.fileUrl=n.data[0].fileUrl,s.imageId=n.data[0].fileId):(s.fileUrl=be,pe.value==0?(pe.value++,je({message:"拖拽失败，请再试一次",type:"warning"})):je({message:"拖拽失败，请联系管理员",type:"warning"}))}async function c(){ao.value=!1,H.value.forEach(o=>o.reminder=!1);const s=H.value.filter(o=>o.fileUrl.startsWith("https")).map(o=>({imageType:o.caption,imageUrl:o.fileUrl,imageId:o.fileId||null}));me("/prod-api/business/orthImage",{apmtId:g,orthImageList:s}).then(()=>{xe()})}const ae=e=>{!e.target.src.endsWith("jpeg")&&!e.target.src.endsWith("jpg")&&(e.target.src=Os,e.target.classList.add("hover"))},E=e=>{!e.target.src.endsWith("jpeg")&&!e.target.src.endsWith("jpg")&&(e.target.src=be),e.target.classList.remove("hover")};function xe(){po(),rt(),et(),dt()}const Me=()=>{H.value.forEach(e=>e.reminder=!1)},Be=y([]),Ye=y([]),zt=["forehead_center","eyebrow_right_corner_left","eyebrow_left_corner_right","nose_middle_contour","chin_2","cheek_right_1","cheek_left_1"],Ht=y(0),Qt=y(0),So=y(0);function Xo(e,s,o,n){const l=new Image,f=document.getElementById(n),L=f.getContext("2d");l.onload=function(){const M=l.width,v=l.height;let P=M,de=v;So.value=M/v,P>e&&(P=e,de=P/So.value),de>s&&(de=s,P=de*So.value),f.width=P,Ht.value=P,f.height=de,Qt.value=de,L.clearRect(0,0,f.width,f.height),L.drawImage(l,0,0,P,de),Kt(L,l,f,Xe.value)},l.src=o}function Kt(e,s,o,n){e.clearRect(0,0,o.width,o.height),e.drawImage(s,0,0,o.width,o.height),n.forEach(function(l){const f=l.x,L=l.y;e.beginPath(),e.arc(f,L,2,0,2*Math.PI),e.fillStyle="red",e.fill()}),ss(e,o)}async function es(e){const s=Fo(e[6],e[0],e[3]),o=Fo(e[5],e[0],e[3]),n=Be.value[0].orthTitleList[0];if(n.aiFlag="1",n.aiTest=!0,s<o){const l=n.orthOptionsList[2].id;await we(l,n,"",g)}else if(s>o){const l=n.orthOptionsList[1].id;await we(l,n,"",g)}else{const l=n.orthOptionsList[0].id;await we(l,n,"",g)}}async function os(e){const s=Be.value[0].orthTitleList[3];s.aiFlag="1",s.aiTest=!0;const o=Fo(e[3],e[2],e[1]),n=Dt(e);Ho(o,n,s)}async function ts(e){const s=Be.value[0].orthTitleList[4];s.aiFlag="1",s.aiTest=!0;const o=qo(e[3],e[4]),n=Dt(e);Ho(o,n,s)}async function Yo(e){await es(e),await os(e),await ts(e),po()}const zo=y(!1);async function Ho(e,s,o){if(e>s){const n=o.orthOptionsList[2].id;await we(n,o,"",g)}else if(e<s){const n=o.orthOptionsList[1].id;await we(n,o,"",g)}else{const n=o.orthOptionsList[0].id;await we(n,o,"",g)}po()}function ss(e,s){e.strokeStyle="green",e.lineWidth=1,e.beginPath(),Xe.value.forEach(o=>{e.moveTo(0,o.y),e.lineTo(s.width,o.y),e.strokeStyle="blue"}),e.stroke(),e.strokeStyle="purple",e.lineWidth=1,e.beginPath(),e.moveTo(Xe.value[0].x,0),e.lineTo(Xe.value[3].x,s.height),e.stroke()}async function as(e){me("/prod-api/business/orthPoint",{apmtId:g,pointType:2,pointList:e})}const Xe=y([]),bo=y(),Qo=y();async function po(){const e=await Le(`/prod-api/business/orthClass/list/2/面型评估/${g}`);Be.value=e.data,e.data.forEach(s=>s.orthTitleList.forEach(o=>o.showInput=!1)),e.data.forEach(s=>{if(!s.imageUrl)s.hasImage=!1;else{s.hasImage=!0;const o=document.createElement("link");if(o.href=s.imageUrl,o.rel="preload",o.as="image",document.head.appendChild(o),s.className==="正面像"){const n=s.orthTitleList.find(de=>de.titleName=="正貌"),l=s.orthTitleList.find(de=>de.titleName=="面中三分之一"),f=s.orthTitleList.find(de=>de.titleName=="面下三分之一"),L=n.orthOptionsList.some(de=>de.choosen==!0),M=l.orthOptionsList.some(de=>de.choosen==!0),v=f.orthOptionsList.some(de=>de.choosen==!0);zo.value=!L||!M||!v,bo.value=s.imageUrl;const P=new FormData;P.append("imageUrl",s.imageUrl),Le(`/prod-api/business/orthPoint/list?apmtId=${g}&pointType=2`).then(de=>{de.data.length>0?(Xe.value=de.data.map(te=>({label:te.pointName,x:te.xcoordinate,y:te.ycoordinate})),zo.value&&Yo(Xe.value),ro(()=>{Xo(320,240,bo.value,"FrontalRose")})):me("/prod-api/business/orthImage/calculateFaceShapeSet",P,!0).then(te=>{const se=te.data.face_list[0].landmark201,I=new Image;I.onload=()=>{const{width:p,height:A,ratio:$}=ns(I.width,I.height,320,240),oe=p/I.width,ne=A/I.height;Xe.value=zt.map(ie=>({label:ie,x:se[ie].x*oe,y:se[ie].y*ne})),Yo(Xe.value);const qe=Xe.value.map(ie=>[ie.label,ie.x,ie.y]);as(qe)},I.src=bo.value,ro(()=>{Xo(320,240,bo.value,"FrontalRose")})})})}s.className=="正面微笑像"&&(Qo.value=s.imageUrl)}if(s.className=="90度侧面像"){Ye.value=[...s.orthTitleList];const o=s.orthTitleList.find(L=>L.titleName=="凸面型表现"),n=s.orthTitleList.find(L=>L.titleName=="凹面型表现"),l=!o.orthOptionsList.some(L=>L.choosen===!0),f=!n.orthOptionsList.some(L=>L.choosen===!0);l&&f?s.orthTitleList.splice(1,2):f?s.orthTitleList.splice(2,1):l&&s.orthTitleList.splice(1,1)}s.orthTitleList.forEach(o=>{if(o.type==1){o.optionId="",o.text="",o.showInput=!1;const n=o.orthOptionsList.filter(l=>l.choosen===!0);n.length>0&&(o.optionId=n[0].id)}else if(o.type==2){o.optionId=[],o.optionId1=[],o.text="",o.showInput=!1;const n=o.orthOptionsList.filter(l=>l.choosen===!0);n.length>0&&(o.optionId=n.map(l=>l.id),o.optionId1=o.optionId)}})}),Ao.value.style.display="block"}function ns(e,s,o,n){let l=0,f=e,L=s;return l=e/s,f>o&&(f=o,L=f/l),L>n&&(L=n,f=L*l),{width:f,height:L,ratio:l}}const Ko=y([]);async function et(){const e=await Le(`/prod-api/business/orthClass/list/2/口内照/${g}`);Ko.value=e.data,e.data.forEach(s=>s.orthTitleList.forEach(o=>o.showInput=!1)),e.data.forEach(s=>{s.imageUrl?s.hasImage=!0:s.hasImage=!1,s.orthTitleList.forEach(o=>{if(o.type==1){o.optionId="",o.text="",o.showInput=!1;const n=o.orthOptionsList.filter(l=>l.choosen===!0);n.length>0&&(o.optionId=n[0].id)}else if(o.type==2){o.optionId=[],o.optionId1=[],o.text="",o.showInput=!1;const n=o.orthOptionsList.filter(l=>l.choosen===!0);n.length>0&&(o.optionId=n.map(l=>l.id),o.optionId1=o.optionId)}})})}const ot=[po,et,dt,rt,Is];async function ls(){for(;ot.length>0;)await ot.shift()()}ls();const tt=y(),Ne=y([]),st=y(),at=y(),nt=y(!1),lt=y([]);function it(e){e.value.forEach(s=>{s.orthTitleList.forEach(o=>{o.topLeft=[],o.topRight=[],o.bottomLeft=[],o.bottomRight=[];const n=JSON.parse(o.showPosition);o.fdiToothCode?(o.toothCode=o.fdiToothCode.split(","),o.fdiToothCode.split(",").forEach((l,f)=>{l.startsWith("1")||l.startsWith("5")?o.topLeft.push(n[f][0]):l.startsWith("2")||l.startsWith("6")?o.topRight.push(n[f][0]):l.startsWith("4")||l.startsWith("8")?o.bottomLeft.push(n[f][0]):(l.startsWith("3")||l.startsWith("7"))&&o.bottomRight.push(n[f][0])})):o.toothCode=[],o.position=n||[],o.submitAble=!1})}),e.value.forEach(s=>{s.orthTitleList.forEach(o=>{if(o.type==1){o.optionId="",o.text="",o.showInput=!1;const n=o.orthOptionsList.filter(l=>l.choosen===!0);n.length>0&&(o.optionId=n[0].id)}else if(o.type==2){o.optionId=[],o.optionId1=[],o.text="",o.showInput=!1;const n=o.orthOptionsList.filter(l=>l.choosen===!0);n.length>0&&(o.optionId=n.map(l=>l.id),o.optionId1=o.optionId)}})})}async function dt(){const e=await Le(`/prod-api/business/orthClass/list/2/全景片/${g}`);Ne.value=e.data,e.data.forEach(s=>{if(st.value=s.sourceApmtId?s.sourceApmtId:g,at.value=s.id,s.imageUrl?(s.hasImage=!0,tt.value=s.imageUrl):s.hasImage=!1,!s.flag){nt.value=!0;const o={sourceApmtId:st.value,apmtId:g,classId:at.value,location:"2"};me("/prod-api/business/orthClass/mouthCheck",o).then(n=>{if(n.code==200){const l=Ne.value[0].orthTitleList.slice(0,6);lt.value=n.data.slice(6),Ne.value[0].orthTitleList=[...l,...lt.value],it(Ne)}})}s.orthTitleList.forEach(o=>{o.showInput=!1,o.popVisible=!1})}),nt.value||it(Ne)}const fo=y();fo.value=Ot;const Fe=y(null),Oe=y([]);function is(e){return/^[a-zA-Z]$/.test(e)}async function rt(){const e=await Le(`/prod-api/business/orthClass/list/2/侧位片/${g}`);Oe.value=e.data[0].orthTitleList,Fe.value=e.data[0].imageUrl,Oe.value.some(s=>s.aiFlag=="0")&&(Po.value=!0),Fe.value&&(Oe.value.some(s=>s.cephalometricsContent)?Le(`/prod-api/business/orthPoint/list/?apmtId=${g}`).then(s=>{No.value=!0,Lo.value=s.data,wo.value=Lo.value.filter(o=>bt.includes(o.pointName)),$e.value=wo.value.map(o=>({label:o.pointName,x:o.xCoordinate,y:o.yCoordinate})),no(R.value,B.value,!0)}):no(R.value,B.value,!1)),Oe.value.forEach(s=>{is(s.titleName[0])&&(s.showInput=!0),s.cephalometricsContent&&(s.measured=!0);const o=s.orthOptionsList.filter(n=>n.choosen===!0);o.length>0&&(s.optionId=o[0].id),s.AIValue=s.cephalometricsContent,s.inputVal=s.cephalometricsContent})}async function ds(e){return fetch(e).then(s=>s.blob())}const oo=y(null),ct=y(0),ut=y(0),ht=()=>{const e=new Image,s=document.getElementById("myZoomCanvas"),o=s.getContext("2d");e.onload=function(){const n=e.width,l=e.height;let f=n,L=l;const M=window.innerWidth,v=window.innerHeight;f>M?(f=M,L=f/Ke.value):(e.width=window.innerWidth,e.height=e.width/Ke.value,f=e.width,L=e.height),L>v?(L=v,f=L*Ke.value):(e.width=window.innerWidth,e.height=e.width/Ke.value,f=e.width,L=e.height),s.width=f,ct.value=s.width,s.height=L,ut.value=s.height,Te.value=$e.value.map(P=>({label:P.label,x:P.x*f,y:P.y*L})),Do(o,e,s,!0)},s.addEventListener("mousemove",n=>hs(n,e,s,o,ct.value,ut.value)),s.addEventListener("mousedown",n=>cs(n,s)),s.addEventListener("mouseup",us),e.src=Fe.value,e.crossOrigin="anonymous"},rs=()=>{oo.value.style.display="flex",ht()},pt=y(0),ft=y(0),mt=y(0),vt=y(0),Oo=y(!1),to=y(null);function cs(e,s){to.value=yt(e,s),pt.value=e.clientX,ft.value=e.clientY}function us(e){Oo.value=!1,to.value=null,mt.value=e.clientX,vt.value=e.clientY}let _t=y(0),gt=y(0);const ze=y(),Eo=y(!0);function hs(e,s,o,n,l,f){const L=yt(e,o);if(L)n.fillStyle="white",n.font="20px Arial",n.fillText(L.label,L.x+5,L.y-5),Eo.value=!1;else{if(Eo.value)return;ht(),Eo.value=!0}if(Po.value=!0,Oo.value=!0,Oo.value&&to.value){let M=e.clientX-o.getBoundingClientRect().x,v=e.clientY-o.getBoundingClientRect().y;to.value.x=M,to.value.y=v;let P=$e.value.find(te=>te.label==to.value.label);P.x=M/l,P.y=v/f,ze.value=P.label,_t.value=P.x,gt.value=P.y;const de=Te.value.find(te=>te.label==P.label);if(de.x=P.x*l,de.y=P.y*f,Do(n,s,o,!0),ze.value&&(n.fillStyle="white",n.font="20px Arial",n.fillText(P.label,de.x+5,de.y-5)),$t.forEach(te=>{if(P.label!=="A"&&P.label!=="Me"&&te.includes(P.label)){let se=Ro(te,Te.value);We(se,te,!0)}else if(P.label=="Me"&&(te.includes("M")||te.includes("Me"))){let se=Ro(te,Te.value);We(se,te,!0)}Oe.value.forEach(se=>{se.titleName.includes(P.label)&&(se.changeCoor=!0),P.label=="Me"&&(se.titleName.includes("M")||se.titleName.includes("Me"))&&(se.changeCoor=!0)})}),Nt.forEach(te=>{if(P.label!=="A"&&P.label!=="Me"&&te.includes(P.label)){let se=$o(te,Te.value);We(se,te,!0)}else if(P.label=="Me"&&(te.includes("M")||te.includes("Me"))){let se=$o(te,Te.value);We(se,te,!0)}else if(P.label=="A"&&te.includes(P.label)&&!te.includes("Ar")){let se=$o(te,Te.value);We(se,te,!0)}Oe.value.forEach(se=>{(P.label=="Me"&&(se.titleName.includes("M")||se.titleName.includes("Me"))||P.label=="A"&&se.titleName.includes("A")&&!se.titleName.includes("Ar")||se.titleName.includes(P.label))&&(se.changeCoor=!0)})}),Tt.forEach(te=>{if(P.label!=="A"&&P.label!=="Me"&&te.includes(P.label)){let se=Bo(te,Te.value);We(se,te,!0)}else if(P.label=="Me"&&(te.includes("M")||te.includes("Me"))){let se=Bo(te,Te.value);We(se,te,!0)}Oe.value.forEach(se=>{se.titleName.includes(P.label)&&(se.changeCoor=!0),P.label=="Me"&&(se.titleName.includes("M")||se.titleName.includes("Me"))&&(se.changeCoor=!0)})}),["A","B","UI","LI","L6","U6"].includes(P.label)){Oe.value.forEach(ne=>{ne.titleName=="Wits"&&(ne.changeCoor=!0)});const te=Te.value.find(ne=>ne.label=="A"),se=Te.value.find(ne=>ne.label=="B"),I=Te.value.find(ne=>ne.label=="UI"),p=Te.value.find(ne=>ne.label=="LI"),A=Te.value.find(ne=>ne.label=="U6"),$=Te.value.find(ne=>ne.label=="L6"),oe=jo(te,se,I,p,A,$,ko.value,Co.value);We(oe,"Wits",!0)}}}function yt(e,s){const o=s.getBoundingClientRect().x,n=s.getBoundingClientRect().y,l=e.clientX,f=e.clientY;for(let L=0;L<Te.value.length;L++){let M=Te.value[L],v=l-o-M.x,P=f-n-M.y;if(Math.sqrt(v*v+P*P)<=5)return M}return null}const Co=y(0),ko=y(0),ps=y(null),It=e=>{if(q.value){oo.value.style.display="none",q.value=!1;return}else if(e===!0||!(ft.value!==vt.value||pt.value!==mt.value)){oo.value.style.display="none",no(R.value,B.value,!0),Oe.value.forEach(o=>{if(ze.value!=="Me"&&ze.value!=="A"){if(o.titleName.includes(ze.value)){o.aiFlag="0";let n={apmtId:g,titleId:o.id,optionsIdStr:[],otherContent:"",cephalometricsContent:o.cephalometricsContent,fdiToothCode:"",showPosition:""};me("/prod-api/business/optionsResult",n).then(l=>{if(l.code==200&&l.data.optionsId){o.optionId=l.data.optionsId;let f={apmtId:g,titleId:o.id,optionsIdStr:[l.data.optionsId],otherContent:"",cephalometricsContent:"",fdiToothCode:"",showPosition:""};me("/prod-api/business/optionsResult",f)}})}}else if(ze.value=="Me"&&(o.titleName.includes("M")||o.titleName.includes("Me"))){o.aiFlag="0";let n={apmtId:g,titleId:o.id,optionsIdStr:[],otherContent:"",cephalometricsContent:o.cephalometricsContent,fdiToothCode:"",showPosition:""};me("/prod-api/business/optionsResult",n).then(l=>{if(l.code==200){o.optionId=l.data.optionsId;let f={apmtId:g,titleId:o.id,optionsIdStr:[l.data.optionsId],otherContent:"",cephalometricsContent:"",fdiToothCode:"",showPosition:""};me("/prod-api/business/optionsResult",f)}})}else if(ze.value=="A"&&(o.titleName.includes("A")&&o.titleName.length==3||o.titleName=="Wits")){o.aiFlag="0";let n={apmtId:g,titleId:o.id,optionsIdStr:[],otherContent:"",cephalometricsContent:o.cephalometricsContent,fdiToothCode:"",showPosition:""};me("/prod-api/business/optionsResult",n).then(l=>{if(l.code==200&&l.data.optionsId){o.optionId=l.data.optionsId;let f={apmtId:g,titleId:o.id,optionsIdStr:[l.data.optionsId],otherContent:"",cephalometricsContent:"",fdiToothCode:"",showPosition:""};me("/prod-api/business/optionsResult",f)}})}}),io("/prod-api/business/orthPoint",{apmtId:g,pointName:ze.value,xCoordinate:_t.value,yCoordinate:gt.value});const s=Oe.value.filter(o=>o.changeCoor===!0).map(o=>({titleId:o.id,aiType:1}));me("/prod-api/business/optionsResult/updateAIType",{apmtId:g,cephalometricsList:s})}},Lo=y([]),Q=y([]),Te=y([]),$e=y([]),wo=y([]),bt=["A","N","B","Or","Po","Go","Go_1","UI","UI_1","S","P","Go`","Me","Ar","LI","LI_1","Ratio1","Ratio2","U6","L6","Gn","ANS","PNS"];let Ct,kt,Lt;async function fs(e){const s=new FormData;s.append("file",e),s.append("mobile","13014532111");const o=await Re();if(o){const n=await Pt({url:"http://47.101.150.34:8177/bonceph/platform/marker/predict",method:"post",data:s,headers:{Authorization:`${o}`,"content-type":"multipart/form-data"}});n.status==200&&(Lo.value=n.data.data,wo.value=Lo.value.filter(l=>bt.includes(l[0])),$e.value=wo.value.map(l=>({label:l[0],x:l[1],y:l[2]})),Ct=$e.value.find(l=>l.label=="Ratio1"),kt=$e.value.find(l=>l.label=="Ratio2"),Lt=qo(Ct,kt))}}const Po=y(!1);function ms(e,s,o,n,l,f,L,M){const v=(M-f)*(o-e)-(L-l)*(n-s);if(v===0)return null;const P=((L-l)*(s-f)-(M-f)*(e-l))/v,de=e+P*(o-e),te=s+P*(n-s);return{x:de,y:te}}const vs=(e,s,o,n,l)=>{e.beginPath(),e.moveTo(s.x,s.y),e.lineTo(o.x,o.y),e.stroke(),e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(l.x,l.y),e.stroke()},so=(e,s,o,n,l)=>{const f=ms(s.x,s.y,o.x,o.y,n.x,n.y,l.x,l.y);e.beginPath(),e.moveTo(s.x,s.y),e.lineTo(o.x,o.y),e.stroke(),e.beginPath(),e.moveTo(n.x,n.y),e.lineTo(l.x,l.y),e.stroke(),gs(s,f,n)},wt=(e,s,o,n)=>{e.beginPath(),e.moveTo(s.x,s.y),e.lineTo(o.x,o.y),e.lineTo(n.x,n.y),e.stroke()};function xt(e,s,o){const n={x:s.x-e.x,y:s.y-e.y},l={x:o.x-e.x,y:o.y-e.y},f=Math.sqrt(n.x**2+n.y**2),L=(l.x*n.x+l.y*n.y)/f**2;return{x:e.x+L*n.x,y:e.y+L*n.y}}const _s=e=>{if(No.value){const o=document.getElementById("myCanvas").getContext("2d");o.lineWidth=1.5,o.save(),o.strokeStyle="blue";let n=[],l,f,L,M;if(["颈椎分期","腺样体","扁桃体"].includes(e))return;if(["S-Go/N-Me","S-N/Go`-Me"].includes(e))n=e.split("/").map(v=>v.split("-")),l=Q.value.find(v=>v.label==n[0][0]),f=Q.value.find(v=>v.label==n[0][1]),L=Q.value.find(v=>v.label==n[1][0]),M=Q.value.find(v=>v.label==n[1][1]),vs(o,l,f,L,M);else if(e.includes("-"))n=e.split("-").filter(v=>v!=="-"),n.length==2?(e==="L1-MP"&&(l=Q.value.find(v=>v.label=="LI_1"),f=Q.value.find(v=>v.label=="LI"),L=Q.value.find(v=>v.label=="Go_1"),M=Q.value.find(v=>v.label=="Me"),so(o,l,f,L,M)),e==="SN-MP"&&(l=Q.value.find(v=>v.label=="S"),f=Q.value.find(v=>v.label=="N"),L=Q.value.find(v=>v.label=="Go_1"),M=Q.value.find(v=>v.label=="Me"),so(o,l,f,L,M)),e==="U1-SN"&&(l=Q.value.find(v=>v.label=="UI_1"),f=Q.value.find(v=>v.label=="UI"),L=Q.value.find(v=>v.label=="S"),M=Q.value.find(v=>v.label=="N"),so(o,l,f,L,M)),e==="FH-MP"&&(l=Q.value.find(v=>v.label=="P"),f=Q.value.find(v=>v.label=="Or"),L=Q.value.find(v=>v.label=="Go_1"),M=Q.value.find(v=>v.label=="Me"),so(o,l,f,L,M))):n.length==3&&(n[0]=="Na"?(l=Q.value.find(v=>v.label=="N"),f=Q.value.find(v=>v.label==n[1]),L=Q.value.find(v=>v.label==n[2]),wt(o,l,f,L)):(l=Q.value.find(v=>v.label==n[0]),f=Q.value.find(v=>v.label==n[1]),L=Q.value.find(v=>v.label==n[2]),wt(o,l,f,L)));else if(e=="Wits"){const v=Q.value.find(ne=>ne.label=="A"),P=Q.value.find(ne=>ne.label=="B"),de=Q.value.find(ne=>ne.label=="UI"),te=Q.value.find(ne=>ne.label=="LI"),se=Q.value.find(ne=>ne.label=="U6"),I=Q.value.find(ne=>ne.label=="L6"),p={x:(se.x+I.x)/2,y:(se.y+I.y)/2},A={x:(de.x+te.x)/2,y:(de.y+te.y)/2},$=xt(A,p,v),oe=xt(A,p,P);o.beginPath(),o.moveTo(p.x,p.y),o.lineTo(A.x,A.y),o.strokeStyle="blue",o.stroke(),o.setLineDash([5,5]),o.beginPath(),o.moveTo(v.x,v.y),o.lineTo($.x,$.y),o.strokeStyle="blue",o.stroke(),o.setLineDash([5,5]),o.beginPath(),o.moveTo(P.x,P.y),o.lineTo(oe.x,oe.y),o.strokeStyle="blue",o.stroke()}else e=="ODI"?(l=Q.value.find(v=>v.label=="A"),f=Q.value.find(v=>v.label=="B"),L=Q.value.find(v=>v.label=="Go"),M=Q.value.find(v=>v.label=="Gn"),so(o,l,f,L,M)):e=="APDI"?(l=Q.value.find(v=>v.label=="A"),f=Q.value.find(v=>v.label=="B"),L=Q.value.find(v=>v.label=="Go"),M=Q.value.find(v=>v.label=="Gn"),so(o,l,f,L,M)):(n=e.split(""),l=Q.value.find(v=>v.label==n[0]),f=Q.value.find(v=>v.label==n[1]),L=Q.value.find(v=>v.label==n[2]),o.beginPath(),o.moveTo(l.x,l.y),o.lineTo(f.x,f.y),o.lineTo(L.x,L.y),o.stroke())}};function gs(e,s,o){const l=document.getElementById("myCanvas").getContext("2d");l.setLineDash([5,5]),l.beginPath(),l.moveTo(e.x,e.y),l.lineTo(s.x,s.y),l.lineTo(o.x,o.y),l.stroke()}const ys=()=>{No.value&&no(R.value,B.value,!0)},ao=y(!1),xo=e=>{ao.value=!0,H.value.find(s=>s.caption===e).reminder=!0,Mo()};async function Is(){j.value.length===0&&Le(`/prod-api/business/orthImage/imageList?patientId=${D}`).then(e=>{C.value=e.data,e.data.find(s=>s.imageList.length!==0)&&(j.value[0]=e.data.find(s=>s.imageList.length!==0),le.value=e.data.findIndex(s=>s.imageList.length!==0),j.value[0].imageList.forEach(s=>{s.imgUrl=s.fileUrl,s.choose=!1}))})}async function Mo(){const e=await Le(`/prod-api/business/orthImage/list?apmtId=${g}`);e.code==200&&e.data.length>0?e.data.forEach(s=>{H.value.forEach(o=>{s.imageType==o.caption&&(o.fileUrl=s.imageUrl,o.id=s.id)})}):H.value.forEach(s=>{s.fileUrl=be})}const Nt=["ANB","Ar-Go`-Me","Ar-Go`-N","Na-Go`-Me","S-Ar-Go`","Na-S-Ar","SNA","SNB"],$t=["S-Go/N-Me","S-N/Go`-Me"],Tt=["U1-SN","SN-MP","L1-MP","FH-MP"];function We(e,s,o){const n=Oe.value.find(l=>l.titleName==s);n.cephalometricsContent=e.toFixed(2),n.inputVal=n.cephalometricsContent,n.AIValue=n.cephalometricsContent,o?n.aiFlag="0":n.aiFlag="1"}function bs(){$t.forEach(M=>{let v=Ro(M,Q.value);We(v,M,!1)}),Nt.forEach(M=>{let v=$o(M,Q.value);We(v,M,!1)}),Tt.forEach(M=>{let v=Bo(M,Q.value);We(v,M,!1)}),$e.value=$e.value.map(M=>({label:M.label,x:M.x*1,y:M.y*1}));const e=$e.value.find(M=>M.label=="A"),s=$e.value.find(M=>M.label=="B"),o=$e.value.find(M=>M.label=="UI"),n=$e.value.find(M=>M.label=="LI"),l=$e.value.find(M=>M.label=="U6"),f=$e.value.find(M=>M.label=="L6"),L=jo(e,s,o,n,l,f,Lt);We(L,"Wits",!1)}async function Cs(){Oe.value.forEach(e=>{if(!["颈椎分期","腺样体","扁桃体"].includes(e.titleName)){e.measured=!0;let s={apmtId:g,titleId:e.id,optionsIdStr:[],otherContent:"",cephalometricsContent:e.cephalometricsContent,fdiToothCode:"",showPosition:"",aiFlag:"1"};me("/prod-api/business/optionsResult",s).then(o=>{if(o.code==200&&o.data.optionsId){e.optionId=o.data.optionsId;let n={apmtId:g,titleId:e.id,optionsIdStr:[o.data.optionsId],otherContent:"",cephalometricsContent:"",fdiToothCode:"",showPosition:""};me("/prod-api/business/optionsResult",n)}})}}),me("/prod-api/business/orthPoint",{apmtId:g,pointList:$e.value.map(e=>[e.label,e.x,e.y])})}const No=y(!1);function ks(){no(R.value,B.value,!0),bs(),Cs(),Oe.value.forEach(e=>e.aiFlag="1"),Je.value=!1}const Ao=y(null),Vt=()=>{const e=Wo.service({lock:!0,text:"正在计算中",background:"rgba(0, 0, 0, 0.7)",target:Ao.value});e.value=!0,Fe.value&&ds(Fe.value).then(s=>{fs(s).then(()=>{No.value=!0,Q.value=$e.value.map(o=>({label:o.label,x:o.x*ko.value,y:o.y*Co.value})),e.close(),ks()})}).catch(s=>console.error("Error converting imageUrl to File:",s))};function Do(e,s,o,n){e.clearRect(0,0,o.width,o.height),e.drawImage(s,0,0,o.width,o.height),n?Te.value.forEach(function(l){const f=l.x,L=l.y;e.beginPath(),e.arc(f,L,5,0,2*Math.PI),e.fillStyle="red",e.fill()}):Q.value.forEach(function(l){const f=l.x,L=l.y;e.beginPath(),e.arc(f,L,2,0,2*Math.PI),e.fillStyle="red",e.fill(),e.fillStyle="white",e.font="20px Arial"})}let Ke=y(0);function no(e,s,o){const n=new Image,l=document.getElementById("myCanvas"),f=l.getContext("2d");n.onload=function(){const L=n.width,M=n.height;let v=L,P=M;Ke.value=L/M,v>e&&(v=e,P=v/Ke.value),P>s&&(P=s,v=P*Ke.value),l.width=v,ko.value=v,R.value=v,l.height=P,Co.value=P,B.value=P,Q.value=$e.value.map(de=>({label:de.label,x:de.x*ko.value,y:de.y*Co.value})),f.clearRect(0,0,l.width,l.height),f.drawImage(n,0,0,v,P),o&&Do(f,n,l,!1)},n.src=Fe.value,n.crossOrigin="anonymous"}Jt(()=>{Xt($e.value,e=>{e&&Po.value&&Vt()}),window.addEventListener("click",e=>{const s=document.querySelector(".el-popper.el-popover");if(s&&e.target!==s&&!s.contains(e.target)){const o=Ne.value[0].orthTitleList.findIndex(n=>n.popVisible===!0);o!==-1&&(Ne.value[0].orthTitleList[o].popVisible=!1)}})});const Ze=(e,s,o)=>{if(ee.pdfId&&sessionStorage.removeItem(ee.pdfId),s.titleName=="侧貌"){const n=Be.value.find(l=>l.className=="90度侧面像");if(s.orthOptionsList.find(l=>e==l.id).optionName=="凸面型"){const l=Ye.value.find(f=>f.titleName=="凹面型表现");we([],l,"",g),n.orthTitleList=Ye.value.filter(f=>!f.titleName.includes("凹")),l.orthOptionsList.forEach(f=>f.choosen=!1),l.optionId=[]}else if(s.orthOptionsList.find(l=>e==l.id).optionName=="凹面型"){const l=Ye.value.find(f=>f.titleName=="凸面型表现");we([],l,"",g),n.orthTitleList=Ye.value.filter(f=>!f.titleName.includes("凸")),l.optionId=[],l.orthOptionsList.forEach(f=>f.choosen=!1)}else if(s.orthOptionsList.find(l=>e==l.id).optionName=="直面型"){n.orthTitleList=Ye.value.filter(L=>!L.titleName.includes("凸")&&!L.titleName.includes("凹"));const l=Ye.value.find(L=>L.titleName=="凸面型表现"),f=Ye.value.find(L=>L.titleName=="凹面型表现");l.optionId=[],f.optionId=[],we([],l,"",g),we([],f,"",g),po()}}o=="侧位片"&&(s.aiFlag="0",me("/prod-api/business/optionsResult/updateAIType",{apmtId:g,cephalometricsList:[{titleId:s.id,aiType:3}]})),Io(e,s,g),we(s.optionId,s,"",g)},Ut=(e,s)=>{if(s.hasImage)Ne.value[0].orthTitleList.forEach(o=>{e!==o&&(o.popVisible=!1)}),e.popVisible=!e.popVisible;else return},St=e=>{if(console.log(e.submitAble),!e.submitAble)return;let s={apmtId:g,titleId:e.id,optionsIdStr:[],otherContent:"",cephalometricsContent:"",fdiToothCode:e.toothCode.join(),showPosition:JSON.stringify(e.position)};me("/prod-api/business/optionsResult",s).then(()=>{e.submitAble=!1})},Ls=(e,s)=>{we(e,s,"",g)};return(e,s)=>{const o=_o,n=co,l=To,f=Vo,L=Jo,M=Go,v=jt,P=Yt,de=Vs,te=Ft,se=Ws("lazy");return t(),i(k,null,[r("div",Fa,[r("div",{class:"button",onClick:ue},[Wa,Y("影像管理")]),W(Ve,{text:"面型评估",backgroundColor:"#f4f7fd"}),r("div",ja,[(t(!0),i(k,null,U(Be.value,(I,p)=>(t(),b(Et,{key:I.id,imageCaption:I.className,class:Z({removeBorder:I.className==="90度侧面像"||I.className==="45度侧面像"})},{img:u(()=>[I.imageUrl?(t(),i(k,{key:0},[I.className=="正面像"?(t(),i("canvas",qa)):He((t(),i("img",Ga,null,512)),[[se,I.imageUrl]])],64)):(t(),i("div",{key:1,class:"imageItem__placeholder",onClick:A=>xo(I.className)},[r("img",{src:fo.value,class:"addPic"},null,8,Ja)],8,Za))]),content:u(()=>[(t(!0),i(k,null,U(I.orthTitleList,A=>(t(),b(_e,{key:A.id,label:A.titleName,width:"120px"},{default:u(()=>[A.type==1?(t(),b(n,{key:0,modelValue:A.optionId,"onUpdate:modelValue":$=>A.optionId=$,onChange:$=>Ze(A.optionId,A,I.className,I)},{default:u(()=>[(t(!0),i(k,null,U(A.orthOptionsList,$=>(t(),b(o,{disabled:!I.hasImage,class:Z({serious:$.serious=="1",checked:$.choosen===!0}),key:$.id,label:$.id},{default:u(()=>[Y(V($.optionName)+" ",1),He(r("img",Xa,null,512),[[mo,A.aiFlag=="1"&&p==0&&$.choosen]])]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0),A.type==2?(t(),b(f,{key:1,modelValue:A.optionId,"onUpdate:modelValue":$=>A.optionId=$,onChange:$=>Ze(A.optionId,A,I.className,I)},{default:u(()=>[(t(!0),i(k,null,U(A.orthOptionsList,$=>(t(),b(l,{disabled:!I.hasImage,class:Z({serious:$.serious=="1",checked:$.choosen===!0}),key:$.id,label:$.id},{default:u(()=>[Y(V($.optionName)+" ",1),$.serious=="0"?(t(),i("img",Ya)):(t(),i("img",za))]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0)]),_:2},1032,["label"]))),128))]),_:2},1032,["imageCaption","class"]))),128))]),W(Ve,{text:"口内照"}),r("div",Ha,[(t(!0),i(k,null,U(Ko.value,I=>(t(),b(Et,{key:I.id,imageCaption:I.className},{img:u(()=>[I.imageUrl?He((t(),i("img",Qa,null,512)),[[se,I.imageUrl]]):(t(),i("div",{key:1,class:"imageItem__placeholder",onClick:p=>xo(I.className)},[r("img",{src:fo.value,class:"addPic"},null,8,en)],8,Ka))]),content:u(()=>[I.className=="正面咬合"?(t(),i("img",{key:0,src:Qo.value,alt:""},null,8,on)):F("",!0),r("div",null,[(t(!0),i(k,null,U(I.orthTitleList,p=>(t(),b(_e,{key:p.id,label:p.titleName,width:"100px"},{default:u(()=>[p.type==1?(t(),b(n,{key:0,modelValue:p.optionId,"onUpdate:modelValue":A=>p.optionId=A,onChange:A=>Ze(p.optionId,p)},{default:u(()=>[(t(!0),i(k,null,U(p.orthOptionsList,A=>(t(),b(o,{disabled:!I.hasImage,class:Z({serious:A.serious=="1",checked:A.choosen===!0}),key:A.id,label:A.id},{default:u(()=>[Y(V(A.optionName),1)]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0),p.type==2?(t(),b(f,{key:1,modelValue:p.optionId,"onUpdate:modelValue":A=>p.optionId=A,onChange:A=>Ze(p.optionId,p)},{default:u(()=>[(t(!0),i(k,null,U(p.orthOptionsList,A=>(t(),b(l,{disabled:!I.hasImage,class:Z({serious:A.serious=="1",checked:A.choosen===!0}),key:A.id,label:A.id},{default:u(()=>[Y(V(A.optionName)+" ",1),A.serious=="0"?(t(),i("img",tn)):(t(),i("img",sn))]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0)]),_:2},1032,["label"]))),128))])]),_:2},1032,["imageCaption"]))),128))]),W(Ve,{text:"全景片"}),r("div",an,[(t(!0),i(k,null,U(Ne.value,I=>(t(),i("div",{key:I.id,class:"placeholderContainer"},[r("div",{class:"image",style:vo({flex:I.imageUrl?"1":"0","min-width":I.imageUrl?"250px":"auto"})},[I.imageUrl?(t(),i("img",{key:0,src:I.imageUrl,style:{width:"100%",cursor:"pointer"},onClick:G},null,8,nn)):(t(),i("div",{key:1,class:"imageItem__placeholder",onClick:p=>xo(I.className)},[r("img",{src:fo.value,class:"addPic"},null,8,dn)],8,ln))],4),r("div",rn,[r("div",cn,[r("div",un,[(t(!0),i(k,null,U(Ne.value[0].orthTitleList,(p,A)=>(t(),i(k,{key:p.id},[A<=2?(t(),b(_e,{key:0,label:p.titleName,width:"120px"},{default:u(()=>[p.type==1?(t(),b(n,{key:0,modelValue:p.optionId,"onUpdate:modelValue":$=>p.optionId=$,onChange:$=>Ze(p.optionId,p)},{default:u(()=>[(t(!0),i(k,null,U(p.orthOptionsList,$=>(t(),b(o,{disabled:!Ne.value[0].hasImage,class:Z({serious:$.serious=="1",checked:$.choosen===!0}),key:$.id,label:$.id},{default:u(()=>[Y(V($.optionName),1)]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0),p.optionId==136?(t(),b(L,{key:1,placeholder:"请输入",modelValue:p.otherContent,"onUpdate:modelValue":$=>p.otherContent=$,onBlur:$=>Ls(p.optionId,p)},null,8,["modelValue","onUpdate:modelValue","onBlur"])):p.type==2?(t(),b(f,{key:2,modelValue:p.optionId,"onUpdate:modelValue":$=>p.optionId=$,onChange:$=>Ze(p.optionId,p)},{default:u(()=>[(t(!0),i(k,null,U(p.orthOptionsList,$=>(t(),b(l,{disabled:!Ne.value[0].hasImage,class:Z({serious:$.serious=="1",checked:$.choosen===!0}),key:$.id,label:$.id},{default:u(()=>[Y(V($.optionName)+" ",1),$.serious=="0"?(t(),i("img",hn)):(t(),i("img",pn))]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0)]),_:2},1032,["label"])):F("",!0)],64))),128))]),r("div",fn,[(t(!0),i(k,null,U(Ne.value[0].orthTitleList,(p,A)=>(t(),i(k,{key:p.id},[A<=5&&A>=3?(t(),b(_e,{key:0,label:p.titleName,width:"120px"},{default:u(()=>[p.type==1?(t(),b(n,{key:0,modelValue:p.optionId,"onUpdate:modelValue":$=>p.optionId=$,onChange:$=>Ze(p.optionId,p)},{default:u(()=>[(t(!0),i(k,null,U(p.orthOptionsList,$=>(t(),b(o,{disabled:!Ne.value[0].hasImage,class:Z({serious:$.serious=="1",checked:$.choosen===!0}),key:$.id,label:$.id},{default:u(()=>[Y(V($.optionName),1)]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0),p.type==2?(t(),b(f,{key:1,modelValue:p.optionId,"onUpdate:modelValue":$=>p.optionId=$,onChange:$=>Ze(p.optionId,p)},{default:u(()=>[(t(!0),i(k,null,U(p.orthOptionsList,$=>(t(),b(l,{disabled:!Ne.value[0].hasImage,class:Z({serious:$.serious=="1",checked:$.choosen===!0}),key:$.id,label:$.id},{default:u(()=>[Y(V($.optionName)+" ",1),$.serious=="0"?(t(),i("img",mn)):(t(),i("img",vn))]),_:2},1032,["disabled","class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0)]),_:2},1032,["label"])):F("",!0)],64))),128))]),r("div",_n,[(t(!0),i(k,null,U(Ne.value[0].orthTitleList,(p,A)=>(t(),i(k,{key:p.id},[A>=6&&A<=12?(t(),b(_e,{key:0,label:p.titleName,width:"120px"},{default:u(()=>[W(M,{width:490,visible:p.popVisible,onShow:$=>m(p),onAfterLeave:$=>St(p)},{reference:u(()=>{var $,oe,ne,qe;return[r("div",{class:"diagramWrapper",onClick:lo(ie=>Ut(p,Ne.value[0]),["stop"])},[r("div",yn,[r("div",In,[r("div",bn,V(($=p.topLeft)==null?void 0:$.sort((ie,Ue)=>ie.sort-Ue.sort).map(ie=>ie.value).join("")),1),r("div",Cn,V((oe=p.topRight)==null?void 0:oe.sort((ie,Ue)=>ie.sort-Ue.sort).map(ie=>ie.value).join("")),1)]),r("div",kn,[r("div",Ln,V((ne=p.bottomLeft)==null?void 0:ne.sort((ie,Ue)=>ie.sort-Ue.sort).map(ie=>ie.value).join("")),1),r("div",wn,V((qe=p.bottomRight)==null?void 0:qe.sort((ie,Ue)=>ie.sort-Ue.sort).map(ie=>ie.value).join("")),1)])])],8,gn)]}),default:u(()=>[r("div",xn,[r("div",Nn,[(t(!0),i(k,null,U(N.value,($,oe)=>(t(),i("div",{key:oe,class:Z(["symptomBox",{itemAlignRight:oe===2||oe===4||oe===0||oe===6,marginTop:oe==4||oe==5,marginBottom:oe==2||oe==3,marginRight:oe===2||oe===4||oe===0||oe===6,marginLeft:oe===1||oe===3||oe===5||oe===7}])},[(t(!0),i(k,null,U($,(ne,qe)=>(t(),i("div",{class:Z(["symptomItem",{selected:ne.active===!0}]),id:ne.value,key:qe,onClick:lo(ie=>X(ne,p),["stop"])},V(ne.label),11,$n))),128))],2))),128))]),Tn,Vn])]),_:2},1032,["visible","onShow","onAfterLeave"])]),_:2},1032,["label"])):F("",!0)],64))),128))]),r("div",Un,[(t(!0),i(k,null,U(Ne.value[0].orthTitleList,(p,A)=>(t(),i(k,{key:p.id},[A>=13?(t(),b(_e,{key:0,label:p.titleName,width:"120px"},{default:u(()=>[W(M,{width:490,visible:p.popVisible,onShow:$=>m(p),onAfterLeave:$=>St(p)},{reference:u(()=>{var $,oe,ne,qe;return[r("div",{class:"diagramWrapper",onClick:lo(ie=>Ut(p,Ne.value[0]),["stop"])},[r("div",On,[r("div",En,[r("div",Pn,V(($=p.topLeft)==null?void 0:$.sort((ie,Ue)=>ie.sort-Ue.sort).map(ie=>ie.value).join("")),1),r("div",Mn,V((oe=p.topRight)==null?void 0:oe.sort((ie,Ue)=>ie.sort-Ue.sort).map(ie=>ie.value).join("")),1)]),r("div",An,[r("div",Dn,V((ne=p.bottomLeft)==null?void 0:ne.sort((ie,Ue)=>ie.sort-Ue.sort).map(ie=>ie.value).join("")),1),r("div",Rn,V((qe=p.bottomRight)==null?void 0:qe.sort((ie,Ue)=>ie.sort-Ue.sort).map(ie=>ie.value).join("")),1)])])],8,Sn)]}),default:u(()=>[r("div",Bn,[r("div",Fn,[(t(!0),i(k,null,U(N.value,($,oe)=>(t(),i("div",{key:oe,class:Z(["symptomBox",{itemAlignRight:oe===2||oe===4||oe===0||oe===6,marginTop:oe==4||oe==5,marginBottom:oe==2||oe==3,marginRight:oe===2||oe===4||oe===0||oe===6,marginLeft:oe===1||oe===3||oe===5||oe===7}])},[(t(!0),i(k,null,U($,(ne,qe)=>(t(),i("div",{class:Z(["symptomItem",{selected:ne.active===!0}]),id:ne.value,key:qe,onClick:lo(ie=>X(ne,p),["stop"])},V(ne.label),11,Wn))),128))],2))),128))]),jn,qn])]),_:2},1032,["visible","onShow","onAfterLeave"])]),_:2},1032,["label"])):F("",!0)],64))),128))])])])]))),128))]),W(Ve,{text:"侧位片"}),r("div",{class:"content cephalometric",ref_key:"loadingTarget",ref:Ao,style:{display:"none"}},[r("div",Gn,[r("div",{class:"image",style:vo({flex:Fe.value?"1":"0"})},[He(r("canvas",{ref_key:"myCanvas",ref:ps,id:"myCanvas",onClick:rs,style:{cursor:"pointer"}},null,512),[[mo,Fe.value]]),Fe.value?(t(),b(v,{key:0,class:"cephalometric__button",type:"primary",onClick:Vt},{default:u(()=>[Y("AI测量")]),_:1})):(t(),i("div",{key:1,class:"imageItem__placeholder",onClick:s[0]||(s[0]=I=>xo("侧位片"))},[r("img",{src:fo.value,class:"addPic"},null,8,Zn)]))],4),r("div",Jn,[(t(!0),i(k,null,U(Oe.value,I=>(t(),i(k,{key:I.id},[I.showInput?(t(),i("div",Xn,[r("div",{class:"formItem__label",onMouseenter:p=>_s(I.titleName),onMouseleave:ys},V(I.titleName=="Wits"?I.titleName+"(mm)":I.titleName=="S-Go/N-Me"||I.titleName=="S-N/Go`-Me"?I.titleName+"(%)":I.titleName+"(˚)"),41,Yn),["SNA","SNB","扁桃体","腺样体","颈椎分期"].includes(I.titleName)?F("",!0):(t(),b(P,{key:0,class:"box-item",effect:"light",placement:"top",content:I.titlePrompt},{default:u(()=>[zn]),_:2},1032,["content"])),r("div",Hn,[r("img",{src:Aa,style:vo({opacity:`${I.aiFlag=="1"?1:0}`})},null,4),r("div",Qn,[W(L,{disabled:!Fe.value,modelValue:I.cephalometricsContent,"onUpdate:modelValue":p=>I.cephalometricsContent=p,onInput:p=>Ee(),onFocus:p=>I.measured=!1,onBlur:p=>Ge(I),class:Z({measured:I.measured===!0})},null,8,["disabled","modelValue","onUpdate:modelValue","onInput","onFocus","onBlur","class"]),He(r("img",Kn,null,512),[[mo,I.orthOptionsList.findIndex(p=>p.id==I.optionId)==0]]),He(r("img",el,null,512),[[mo,I.orthOptionsList.findIndex(p=>p.id==I.optionId)==2]])]),W(n,{class:"cephaRadio",onChange:p=>Ze(I.optionId,I,"侧位片"),modelValue:I.optionId,"onUpdate:modelValue":p=>I.optionId=p},{default:u(()=>[(t(!0),i(k,null,U(I==null?void 0:I.orthOptionsList,p=>(t(),b(o,{disabled:!Fe.value,label:p.id,class:Z({serious:p.serious=="1",checked:p.choosen===!0}),key:p.id},{default:u(()=>[Y(V(p.optionName),1)]),_:2},1032,["disabled","label","class"]))),128))]),_:2},1032,["onChange","modelValue","onUpdate:modelValue"])])])):(t(),i("div",ol,[r("div",tl,V(I.titleName),1),W(P,{class:"box-item",effect:"light",placement:"top"},{default:u(()=>[sl]),_:1}),r("div",al,[W(n,{modelValue:I.optionId,"onUpdate:modelValue":p=>I.optionId=p,onChange:p=>Ze(I.optionId,I)},{default:u(()=>[(t(!0),i(k,null,U(I==null?void 0:I.orthOptionsList,p=>(t(),b(o,{disabled:!Fe.value,label:p.id,class:Z({serious:p.serious=="1",checked:p.choosen===!0}),key:p.id},{default:u(()=>[Y(V(p.optionName),1)]),_:2},1032,["disabled","label","class"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])])]))],64))),128))])])],512)]),W(te,{modelValue:ao.value,"onUpdate:modelValue":s[2]||(s[2]=I=>ao.value=I),title:"影像管理",width:"1183px",onClose:Me,"close-on-click-modal":!1},{footer:u(()=>[r("span",Ul,[W(v,{onClick:s[1]||(s[1]=I=>ao.value=!1)},{default:u(()=>[Y("取消")]),_:1}),W(v,{type:"primary",onClick:c},{default:u(()=>[Y(" 确定 ")]),_:1})])]),default:u(()=>[r("div",{class:"imageManagement",ref_key:"loadingTarget2",ref:O},[r("div",nl,[r("div",ll,[il,dl,r("div",rl,[r("div",cl,[W(v,{type:"primary",link:"",icon:eo(js)},{default:u(()=>[Y("上传图片")]),_:1},8,["icon"])]),r("input",{class:"file-upload__input",type:"file",onChange:ce,multiple:""},null,32)])]),r("div",ul,[j.value.length==0?(t(),i("img",hl)):(t(!0),i(k,{key:1},U(j.value,(I,p)=>(t(),i("div",{key:p},[r("div",null,V(I.StartTime.split("T")[0]),1),r("div",pl,[(t(!0),i(k,null,U(I.imageList,A=>(t(),i("div",{class:"item",key:A.id,onMouseenter:$=>A.showFlag=!0,onMouseleave:$=>A.showFlag=!1},[r("div",ml,[r("img",{style:{display:"block"},class:Z(["img",{choose:A.choose===!0}]),src:A.imgUrl,draggable:"true",onDragstart:$=>he(A,$),onDragend:Ie,onClick:$=>ke(A)},null,42,vl),He(r("img",{src:Ns,style:{position:"absolute",right:"6px",bottom:"6px"},onClick:$=>ke(A)},null,8,_l),[[mo,A.choose===!0]])])],40,fl))),128))]),!I.file&&p===j.value.length-1?(t(),i("div",{key:0,style:{display:"inline-flex",color:"#4E5969",cursor:"pointer"},onClick:K},Il)):F("",!0)]))),128))]),r("div",bl,[r("span",Cl,"已选中"+V(z.value)+"张",1),W(v,{onClick:S},{default:u(()=>[Y("自动分类")]),_:1})])]),r("div",kl,[Ll,r("div",wl,[(t(!0),i(k,null,U(H.value,I=>(t(),i("div",{class:"item",key:I.typeName,onMouseenter:p=>I.showFlag=!0,onMouseleave:p=>I.showFlag=!1},[r("div",Nl,[r("img",{class:Z(["img",{hover:I.reminder===!0,animate__animated:I.reminder===!0,animate__bounce:I.reminder===!0}]),style:{display:"block"},src:I.fileUrl,onDrop:p=>ye(p,I),onDragover:lo(ae,["prevent"]),onDragleave:E,onDragstart:p=>h(I),onDragend:Ie},null,42,$l)]),W(de,{width:"300","confirm-button-text":"确认",icon:eo(qs),"icon-color":"#FF7D00","cancel-button-text":"取消",title:"确认删除该张图片吗？",onConfirm:p=>Pe(I)},{reference:u(()=>[I.showFlag&&!I.fileUrl.startsWith("data:image")?(t(),i("img",Tl)):F("",!0)]),_:2},1032,["icon","onConfirm"]),r("div",Vl,V(I.caption),1)],40,xl))),128))])])],512)]),_:1},8,["modelValue"]),r("div",{class:"overlay",ref_key:"overlayRef",ref:oo},[Sl,Ol,q.value?(t(),i("img",{key:0,class:"zoomPanoImage",src:tt.value,style:{cursor:"pointer"},onClick:fe},null,8,El)):F("",!0),q.value?F("",!0):(t(),i("canvas",{key:1,id:"myZoomCanvas",onClick:It})),r("img",{src:Ba,style:{position:"fixed",right:"20px",top:"20px",cursor:"pointer"},onClick:s[3]||(s[3]=I=>It(!0))})],512),Pl],64)}}},Al=Qe(Ml,[["__scopeId","data-v-874a6a6d"]]);const Dl={class:"content"},Rl=["onClick"],Bl={class:"suffix"},Fl={class:"showRange"},Wl={class:"text"},jl={class:"text"},ql={class:"text"},Gl={__name:"modelAnalysis",props:{titleName:String,min:String,max:String,placeholder:String,left:String,middle:String,right:String,conclusion:String,value:Number,cephalometricsContent:String,hasVal:Boolean},emits:["change"],setup(T,{emit:_}){const w=T,g=y(w.cephalometricsContent),D=_,J=fe=>{var R;g.value||(R=fe.target.parentElement.children[1].classList)==null||R.remove("clicked")},ee=fe=>{console.log(fe.target.value==="")};Xt(g,fe=>{D("change",fe,w.value)});let q=y(null);const G=fe=>{var R;Array.from(fe.target.parentElement.classList).includes("googleInput")&&((R=fe.target.parentElement.children[1].classList)==null||R.add("clicked"),fe.target.parentElement.children[0].focus(),q.value=fe.target.parentElement.children[1])};return(fe,R)=>(t(),i("div",Dl,[r("div",{class:"googleInput",onClick:lo(G,["stop"])},[He(r("input",{onInput:ee,"onUpdate:modelValue":R[0]||(R[0]=B=>g.value=B),onBlur:J},null,544),[[Gs,g.value]]),w.placeholder?(t(),i("span",{key:0,class:Z(["placeholder",{clicked:w.hasVal}])},V(w.placeholder),3)):F("",!0),r("div",Bl,V(T.titleName==="SPEE曲线"?"mm":"%"),1)],8,Rl),r("div",Fl,[r("div",{class:Z(["range left",{active:w.conclusion===w.left}])},[r("div",Wl,V(w.left),1)],2),r("div",{class:Z(["range middle",{active:w.conclusion===w.middle}])},[r("div",jl,V(w.middle),1)],2),r("div",{class:Z(["range right",{active:w.conclusion===w.right}])},[r("div",ql,V(w.right),1)],2),r("div",{class:Z(["refNum firstRefNum",{distanceNum:String(w.min).endsWith("m")}])},V(w.min),3),r("div",{class:Z(["refNum secondRefNum",{distanceNum:String(w.max).endsWith("m")}])},V(w.max),3)])]))}},Zl=Qe(Gl,[["__scopeId","data-v-134eb27b"]]);const Jl={class:"formItem"},Xl={class:"formItem__content"},Yl={__name:"customFormItem",props:{label:String,width:String,showMark:Boolean},setup(T){return(_,w)=>{const g=Yt;return t(),i("div",Jl,[r("div",{class:"formItem__label",style:vo({width:T.width})},[Y(V(T.label),1),T.showMark?(t(),b(g,{key:0,class:"box-item",effect:"light",placement:"top-start"},{content:u(()=>[Y(V(_.content),1)]),default:u(()=>[r("img",{onMouseenter:w[0]||(w[0]=(...D)=>_.enterTool&&_.enterTool(...D)),onMouseleave:w[1]||(w[1]=(...D)=>_.leaveTool&&_.leaveTool(...D)),src:Zo,style:{cursor:"pointer"}},null,32)]),_:1})):F("",!0)],4),r("div",Xl,[Zt(_.$slots,"default",{},void 0,!0)])])}}},zl=Qe(Yl,[["__scopeId","data-v-ae329d43"]]);const Hl={class:"stepThree"},Ql={class:"content"},Kl={__name:"stepThree",props:{pdfId:String},setup(T,{expose:_}){const w=y(!1);_({clicked:w});const g=T,J=uo().params.appId,ee=y({});async function q(){const R=await Le(`/prod-api/business/orthClass/list/2/模型分析/${J}`),B=R.data[0].orthTitleList[2];R.data[0].orthTitleList.splice(2,1),R.data[0].orthTitleList.splice(3,0,B),ee.value=R.data[0],ee.value.orthTitleList.forEach((N,m)=>{if(w.value=N.orthOptionsList.some(X=>X.choosen==!0),N.hasVal=!!N.cephalometricsContent,m<=1){N.optionId="";const X=N.orthOptionsList.filter(ve=>ve.choosen===!0);X.length>0&&(N.optionId=X[0].id)}else if(N.value=+N.cephalometricsContent,N.titleName=="SPEE曲线"?(N.min="0mm",N.max="2mm"):(N.min=(N.orthOptionsList[0].optionName*100).toFixed(2)+"%",N.max=(N.orthOptionsList[1].optionName*100).toFixed(2)+"%"),N.placeholder=m==2?"":N.titleName.substr(-4).slice(0,3),N.left=m==2?"反曲":"偏低",N.middle="正常",N.right=m==2?"过深":"偏高",N.titleName=="SPEE曲线")N.minVal=0,N.maxVal=2,N.cephalometricsContent?N.conclusion=+N.cephalometricsContent<0?N.left:+N.cephalometricsContent>2?N.right:N.middle:N.conclusion="";else{let X=N.orthOptionsList[0].optionName,ve=N.orthOptionsList[1].optionName;N.cephalometricsContent?+N.cephalometricsContent/100<X?N.conclusion=N.left:+N.cephalometricsContent/100>ve?N.conclusion=N.right:N.conclusion=N.middle:N.conclusion=""}})}q();const G=(R,B)=>{B.value=+R,B.value&&(B.min.endsWith("m")?B.conclusion=B.value<+B.min.slice(0,1)?B.left:B.value>+B.max.slice(0,1)?B.right:B.middle:B.conclusion=B.value<+B.min.slice(0,5)?B.left:B.value>+B.max.slice(0,5)?B.right:B.middle);const N={apmtId:J,titleId:B.id,optionsIdStr:[],otherContent:"",cephalometricsContent:R===""?"":B.value+"",fdiToothCode:"",showPosition:""};me("/prod-api/business/optionsResult",N)},fe=(R,B)=>{w.value=!0,g.pdfId&&sessionStorage.removeItem(g.pdfId),Io(R,B,J),we(B.optionId,B,"",J)};return(R,B)=>{const N=_o,m=co;return t(),i("div",Hl,[W(Ve,{text:"模型分析",backgroundColor:"#f4f7fd"}),r("div",Ql,[(t(!0),i(k,null,U(ee.value.orthTitleList,(X,ve)=>(t(),b(zl,{label:ve<=1?X.titleName:ve<4?X.titleName.slice(0,8):"",width:"110px",showMark:X.titleName==="Bolton指数（前牙比）",content:X.prompt,key:X.id},{default:u(()=>[ve<=1?(t(),b(m,{key:0,modelValue:X.optionId,"onUpdate:modelValue":ge=>X.optionId=ge,onChange:ge=>fe(X.optionId,X)},{default:u(()=>[(t(!0),i(k,null,U(X.orthOptionsList,ge=>(t(),b(N,{key:ge.id,class:Z({serious:ge.serious=="1",checked:ge.choosen===!0}),label:ge.id},{default:u(()=>[Y(V(ge.optionName),1)]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):(t(),b(Zl,Zs({key:1,titleName:X.titleName},X,{onChange:ge=>G(ge,X)}),null,16,["titleName","onChange"]))]),_:2},1032,["label","showMark","content"]))),128))])])}}},ei=Qe(Kl,[["__scopeId","data-v-0eb4bc2e"]]);const oi=T=>(go("data-v-eebefa5f"),T=T(),yo(),T),ti={class:"stepFour"},si={key:0,class:"content",style:{"padding-top":"4px"}},ai={class:"questionItem__header"},ni=oi(()=>r("img",{src:Es},null,-1)),li={class:"questionItem__header__title"},ii={class:"questionItem__content content"},di={class:"question_level_two"},ri={class:"itemContainer"},ci={class:"singleQuestionItem__label"},ui={class:"singleQuestionItem__content"},hi={key:1,style:{padding:"20px"}},pi={class:"content diagnose"},fi={key:0,src:Ae},mi={key:1,src:De},vi={__name:"stepFour",props:{pdfId:String},setup(T,{expose:_}){const w=y(!1);_({clicked:w});const g=T,J=uo().params.appId,ee=y([]);async function q(){const B=await Le(`/prod-api/business/orthClass/issuesList?apmtId=${J}&serious=1`);if(B.data){const N=B.data.reduce((m,X)=>{if(m[X.question_level_one]){const ve=m[X.question_level_one].list1.find(ge=>ge.question_level_two===X.question_level_two);ve?ve.list2.push({title_name:X.title_name,option_names:X.option_names}):m[X.question_level_one].list1.push({question_level_two:X.question_level_two,list2:[{title_name:X.title_name,option_names:X.option_names}]})}else m[X.question_level_one]=X,m[X.question_level_one].list1=[],m[X.question_level_one].list1.push({question_level_two:X.question_level_two,list2:[{title_name:X.title_name,option_names:X.option_names}]});return m},{});ee.value=Object.values(N),console.log(ee.value)}}q();const G=y([]);async function fe(){const B=await Le(`/prod-api/business/orthClass/list/2/诊断/${J}`);G.value=B.data,B.data[0].classFlag&&(w.value=!0),B.data.forEach(N=>N.orthTitleList.forEach(m=>m.showInput=!1)),B.data.forEach(N=>{N.orthTitleList.forEach(m=>{if(m.type==1){m.optionId="",m.text="",m.showInput=!1;const X=m.orthOptionsList.filter(ve=>ve.choosen===!0);X.length>0&&(m.optionId=X[0].id)}else if(m.type==2){m.optionId=[],m.optionId1=[],m.text="",m.showInput=!1;const X=m.orthOptionsList.filter(ve=>ve.choosen===!0);X.length>0&&(m.optionId=X.map(ve=>ve.id),m.optionId1=m.optionId)}})})}fe();const R=(B,N)=>{w.value=!0,g.pdfId&&sessionStorage.removeItem(g.pdfId),Io(B,N,J),we(N.optionId,N,"",J)};return(B,N)=>{const m=_o,X=co,ve=To,ge=Vo;return t(),i("div",ti,[W(Ve,{text:"问题列表",backgroundColor:"#f4f7fd"}),ee.value.length>0?(t(),i("div",si,[(t(!0),i(k,null,U(ee.value,Ce=>(t(),i("div",{class:"questionItem",key:Ce.id},[r("div",ai,[ni,r("span",li,V(Ce.question_level_one),1)]),r("div",ii,[(t(!0),i(k,null,U(Ce.list1,re=>(t(),i("div",{class:"singleQuestionItem",key:re.id},[r("div",di,V(re.question_level_two),1),r("div",ri,[(t(!0),i(k,null,U(re.list2,ce=>(t(),i("div",{class:"item",key:ce.title_name},[r("span",ci,V(ce.title_name),1),r("span",ui,V(ce.option_names),1)]))),128))])]))),128))])]))),128))])):(t(),i("div",hi," 无 ")),W(Ve,{text:"诊断",backgroundColor:"#f4f7fd",style:{"margin-top":"20px"}}),r("div",pi,[(t(!0),i(k,null,U(G.value,Ce=>(t(),i(k,{key:Ce.id},[(t(!0),i(k,null,U(Ce.orthTitleList,re=>(t(),b(_e,{key:re.id,label:re.titleName,width:"80px"},{default:u(()=>[re.type==1?(t(),b(X,{key:0,modelValue:re.optionId,"onUpdate:modelValue":ce=>re.optionId=ce,onChange:ce=>R(re.optionId,re)},{default:u(()=>[(t(!0),i(k,null,U(re.orthOptionsList,ce=>(t(),b(m,{key:ce.id,class:Z({serious:ce.serious=="1",checked:ce.choosen===!0}),label:ce.id},{default:u(()=>[Y(V(ce.optionName),1)]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0),re.type==2?(t(),b(ge,{key:1,modelValue:re.optionId,"onUpdate:modelValue":ce=>re.optionId=ce,onChange:ce=>R(re.optionId,re)},{default:u(()=>[(t(!0),i(k,null,U(re.orthOptionsList,ce=>(t(),b(ve,{class:Z({serious:ce.serious=="1",checked:ce.choosen===!0}),key:ce.id,label:ce.id},{default:u(()=>[Y(V(ce.optionName)+" ",1),ce.serious=="0"?(t(),i("img",fi)):(t(),i("img",mi))]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0)]),_:2},1032,["label"]))),128))],64))),128))])])}}},_i=Qe(vi,[["__scopeId","data-v-eebefa5f"]]);const ho=T=>(go("data-v-5a7ecc0c"),T=T(),yo(),T),gi={class:"stepFive"},yi={class:"content plan"},Ii={key:0,src:Ae},bi={key:1,src:De},Ci={class:"content"},ki={key:0,src:Ae},Li={key:1,src:De},wi={class:"content"},xi={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",fill:`
                              none
                            `,version:"1.1",width:"9.999975204467773",height:"9.999975204467773",viewBox:"0 0 9.999975204467773 9.999975204467773"},Ni=["fill"],$i={key:0,src:Ae},Ti={key:1,src:De},Vi=ho(()=>r("span",{style:{color:"#4e5969"}}," 个月",-1)),Ui={class:"content"},Si=ho(()=>r("span",{style:{color:"#4e5969","margin-left":"8px"}}," 个月",-1)),Oi={class:"content risk"},Ei={key:0,src:Ae},Pi={key:1,src:De},Mi={key:0,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",fill:"none",version:"1.1",width:"9.999975204467773",height:"9.999975204467773",viewBox:"0 0 9.999975204467773 9.999975204467773"},Ai=["fill"],Di={key:1,src:Ae},Ri={key:2,src:De},Bi={class:"selectContainer",id:"selectContainer"},Fi={class:"container"},Wi=["id","onClick"],ji=ho(()=>r("div",{class:"left"},"右",-1)),qi=ho(()=>r("div",{class:"right"},"左",-1)),Gi={key:0,xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",fill:"none",version:"1.1",width:"9.999975204467773",height:"9.999975204467773",viewBox:"0 0 9.999975204467773 9.999975204467773"},Zi=["fill"],Ji={key:1,src:Ae},Xi={key:2,src:De},Yi={class:"diagramWrapper"},zi={class:"diagram"},Hi={class:"diagramBox"},Qi={class:"toothItem1"},Ki={class:"toothItem2"},ed={class:"diagramBox"},od={class:"toothItem3"},td={class:"toothItem4"},sd={class:"selectContainer",id:"selectContainer"},ad={class:"container"},nd=["id","onClick"],ld=ho(()=>r("div",{class:"left"},"右",-1)),id=ho(()=>r("div",{class:"right"},"左",-1)),dd={class:"content"},rd={__name:"stepFive",props:{pdfId:String},setup(T,{expose:_}){const w=y(!1),g=y(!1);_({goalClicked:w,methodClicked:g});const D=T,J=O=>{O.otherContent&&(O.visible=!0),O.hover=!0};let ee;const q=O=>{O.hover=!1,ee=setTimeout(()=>{O.visible=!1},300);const S=document.querySelectorAll(".myPopper");Array.from(S).forEach(d=>{d.addEventListener("mouseenter",()=>{clearTimeout(ee)})})},G=O=>{O.visible=!0,O.hover=!0};let fe;const R=(O,S)=>{S.hover=!1,fe=setTimeout(()=>{S.visible=!1},300);const d=document.querySelectorAll(".myPopper");Array.from(d).forEach(a=>{a.addEventListener("mouseenter",()=>{clearTimeout(fe)})})},N=uo().params.appId,m=y([]);async function X(){const O=await Le(`/prod-api/business/orthClass/list/2/方案/${N}`);m.value=O.data,O.data.forEach(S=>S.orthTitleList.forEach(d=>d.showInput=!1)),O.data.forEach(S=>{S.orthTitleList.forEach(d=>{if(d.type==1){d.optionId="",d.text="",d.showInput=!1;const a=d.orthOptionsList.filter(h=>h.choosen===!0);a.length>0&&(d.optionId=a[0].id)}else if(d.type==2){d.optionId=[],d.optionId1=[],d.text="",d.showInput=!1;const a=d.orthOptionsList.filter(h=>h.choosen===!0);a.length>0&&(d.optionId=a.map(h=>h.id),d.optionId1=d.optionId)}})})}X();const ve=y([]);async function ge(){const O=await Le(`/prod-api/business/orthClass/list/2/目标/${N}`);ve.value=O.data,w.value=O.data[0].classFlag,O.data.forEach(S=>S.orthTitleList.forEach(d=>d.showInput=!1)),O.data.forEach(S=>{S.orthTitleList.forEach(d=>{if(d.type==1){d.optionId="",d.text="",d.showInput=!1;const a=d.orthOptionsList.filter(h=>h.choosen===!0);a.length>0&&(d.optionId=a[0].id)}else if(d.type==2){d.optionId=[],d.optionId1=[],d.text="",d.showInput=!1;const a=d.orthOptionsList.filter(h=>h.choosen===!0);a.length>0&&(d.optionId=a.map(h=>h.id),d.optionId1=d.optionId)}})})}ge();const Ce=y([]);async function re(){const O=await Le(`/prod-api/business/orthClass/list/2/方法/${N}`);Ce.value=O.data,g.value=O.data[0].classFlag,O.data.forEach(S=>S.orthTitleList.forEach(d=>d.showInput=!1)),O.data.forEach(S=>{S.orthTitleList.forEach(d=>{if(d.titleName=="矫治器"){d.optionId=[],d.optionId1=[],d.orthOptionsList.forEach(h=>{var he,Ie;h.optionName==="无托槽隐形矫治"?(h.fillColor="#C9CDD4",h.brand=O.data[0].orthTitleList.find(ye=>ye.titlePrompt=="无托槽"),h.hoverColor="#2e6ce4",h.clicked=!!h.choosen,h.otherContent=(he=h.brand.orthOptionsList.find(ye=>ye.choosen===!0))==null?void 0:he.id):h.optionName==="硅胶矫治器"&&(h.fillColor="#C9CDD4",h.brand=O.data[0].orthTitleList.find(ye=>ye.titlePrompt=="硅胶"),h.otherContent=(Ie=h.brand.orthOptionsList.find(ye=>ye.choosen===!0))==null?void 0:Ie.id,h.hoverColor="#2e6ce4",h.clicked=!!h.choosen)});const a=d.orthOptionsList.filter(h=>h.choosen===!0);a.length>0&&(d.optionId=a.map(h=>h.id),d.optionId1=d.optionId),d.otherContent=""}else if(d.type==1){d.optionId="",d.text="",d.showInput=!1;const a=d.orthOptionsList.filter(h=>h.choosen===!0);a.length>0&&(d.optionId=a[0].id)}else if(d.type==2){d.optionId=[],d.optionId1=[],d.text="",d.showInput=!1;const a=d.orthOptionsList.filter(h=>h.choosen===!0);a.length>0&&(d.optionId=a.map(h=>h.id),d.optionId1=d.optionId)}})})}re();const ce=y([]);async function Ge(){const O=await Le(`/prod-api/business/orthClass/list/2/周期/${N}`);ce.value=O.data}const Ee=y([]);async function z(){const O=await Le(`/prod-api/business/orthClass/list/2/备注/${N}`);Ee.value=O.data}Ge(),z();const ke=O=>{if(O.cephalometricsContent){const S={apmtId:N,titleId:O.id,optionsIdStr:[],otherContent:"",cephalometricsContent:O.cephalometricsContent,fdiToothCode:"",showPosition:""};me("/prod-api/business/optionsResult",S)}},Pe=y([]);async function le(){const O=await Le(`/prod-api/business/orthClass/list/2/风险/${N}`);Pe.value=O.data,Pe.value.forEach(S=>{S.orthTitleList.forEach(d=>{d.orthOptionsList.forEach(a=>{if(a.optionSuffix){a.topLeft=[],a.topRight=[],a.bottomLeft=[],a.bottomRight=[];const h=JSON.parse(a.showPosition);a.visible=!1,a.fdiToothCode?(a.toothCode=a.fdiToothCode.split(","),a.fdiToothCode.split(",").forEach((he,Ie)=>{he.startsWith("1")||he.startsWith("5")?a.topLeft.push(h[Ie][0]):he.startsWith("2")||he.startsWith("6")?a.topRight.push(h[Ie][0]):he.startsWith("4")||he.startsWith("8")?a.bottomLeft.push(h[Ie][0]):(he.startsWith("3")||he.startsWith("7"))&&a.bottomRight.push(h[Ie][0])})):a.toothCode=[],a.position=h||[],a.submitAble=!1}})})}),Pe.value.forEach(S=>S.orthTitleList.forEach(d=>d.showInput=!1)),Pe.value.forEach(S=>{S.orthTitleList.forEach(d=>{if(d.type==1)d.optionId="",d.text="";else if(d.type==2){d.optionId=[],d.optionId1=[],d.text="",d.showInput=!1;const a=d.orthOptionsList.filter(h=>h.choosen===!0);a.length>0&&(d.optionId=a.map(h=>h.id),d.optionId1=d.optionId)}d.titleName=="矫治风险"&&d.orthOptionsList.forEach(a=>{(a.optionName==="牙根吸收"||a.optionName==="乳牙早失")&&(a.fillColor="#C9CDD4",a.seriousColor="#f44c4c",a.hoverColor="#2e6ce4",a.clicked=!!a.choosen)})})})}le();const j=(O,S)=>{S.otherContent||(S.clicked=!1)},C=(O,S)=>{O.visible=!1,Re.value.forEach(a=>a.forEach(h=>h.active=!1));let d;if(!O.submitAble){if(O.id===237&&!O.toothCode.join()){S.optionId.splice(S.optionId.findIndex(h=>h==237),1);const a=S.orthOptionsList.find(h=>h.id===236);d={apmtId:N,titleId:S.id,optionsIdStr:S.optionId,otherContent:"",cephalometricsContent:"",fdiToothCode:a.toothCode.join(),showPosition:JSON.stringify(a.position),fdiToothCode1:O.toothCode.join(),showPosition1:JSON.stringify(O.position)}}else if(O.id===236&&!O.toothCode.join()){S.optionId.splice(S.optionId.findIndex(h=>h==236),1);const a=S.orthOptionsList.find(h=>h.id===237);d={apmtId:N,titleId:S.id,optionsIdStr:S.optionId,otherContent:"",cephalometricsContent:"",fdiToothCode:a.toothCode.join(),showPosition:JSON.stringify(a.position),fdiToothCode1:O.toothCode.join(),showPosition1:JSON.stringify(O.position)}}}if(O.id===237){const a=S.orthOptionsList.find(h=>h.id===236);a.toothCode&&(d={apmtId:N,titleId:S.id,optionsIdStr:S.optionId,otherContent:"",cephalometricsContent:"",fdiToothCode:a.toothCode.join(),showPosition:JSON.stringify(a.position),fdiToothCode1:O.toothCode.join(),showPosition1:JSON.stringify(O.position)})}else{const a=S.orthOptionsList.find(h=>h.id===237);a.toothCode?d={apmtId:N,titleId:S.id,optionsIdStr:S.optionId,otherContent:"",cephalometricsContent:"",fdiToothCode1:a.toothCode.join(),showPosition1:JSON.stringify(a.position),fdiToothCode:O.toothCode.join(),showPosition:JSON.stringify(O.position)}:(S.optionId.splice(S.optionId.findIndex(h=>h==236),1),d={apmtId:N,titleId:S.id,optionsIdStr:S.optionId,otherContent:"",cephalometricsContent:"",fdiToothCode:a.toothCode.join(),showPosition:JSON.stringify(a.position),fdiToothCode1:O.toothCode.join(),showPosition1:JSON.stringify(O.position)})}me("/prod-api/business/optionsResult",d).then(()=>{O.submitAble=!1,le()})},ue=(O,S)=>{Wt(O,S)},K=y(!1);async function H(O,S,d,a,h){var Ie;if(h=="目标"&&(console.log(h),w.value=!0),h=="方法"&&(g.value=!0),D.pdfId&&sessionStorage.removeItem(D.pdfId),S.titleName=="矫治风险")K.value=!0,S.orthOptionsList.forEach(ye=>{O.includes(ye.id)?ye.clicked=!0:ye.clicked=!1});else if(S.titleName=="矫治器"){const ye=S.optionId.filter(x=>!S.optionId1.includes(x)),pe=(Ie=S.orthOptionsList.find(x=>x.id===ye[0]))==null?void 0:Ie.optionName;ye&&pe&&(pe=="无托槽隐形矫治"||pe=="硅胶矫治器")&&S.orthOptionsList.forEach(x=>{ye.includes(x.id)?(x.clicked=!0,x.visible=!0):x.clicked=!1})}else if(S.titleName=="品牌"){d.visible=!1,we(d.otherContent,S,"",N),we(a.optionId,a,"",N);return}Io(O,S,N);const he=await we(S.optionId,S,"",N);K.value&&he.code==200&&le(),he.code==200&S.titleName=="矫治器"&&re()}const Re=y([]);Re.value=Bt();const Je=O=>{Re.value.forEach(S=>{S.forEach(d=>{var a;d.active=!1,(a=O.toothCode)!=null&&a.includes(d.value+"")&&(d.active=!0)})})};return(O,S)=>{const d=_o,a=co,h=To,he=Vo,Ie=Go,ye=Jo;return t(),i("div",gi,[W(Ve,{text:"方案",backgroundColor:"#f4f7fd"}),r("div",yi,[(t(!0),i(k,null,U(m.value,pe=>(t(),i(k,{key:pe.id},[(t(!0),i(k,null,U(pe.orthTitleList,x=>(t(),b(_e,{label:x.titleName,key:x.id},{default:u(()=>[x.type==1?(t(),b(a,{key:0,modelValue:x.optionId,"onUpdate:modelValue":c=>x.optionId=c,onChange:c=>H(x.optionId,x)},{default:u(()=>[(t(!0),i(k,null,U(x.orthOptionsList,c=>(t(),b(d,{class:Z({serious:c.serious=="1",checked:c.choosen===!0}),key:c.id,label:c.id},{default:u(()=>[Y(V(c.optionName),1)]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0),x.type==2?(t(),b(he,{key:1,modelValue:x.optionId,"onUpdate:modelValue":c=>x.optionId=c,onChange:c=>H(x.optionId,x)},{default:u(()=>[(t(!0),i(k,null,U(x.orthOptionsList,c=>(t(),b(h,{class:Z({serious:c.serious=="1",checked:c.choosen===!0}),key:c.id,label:c.id},{default:u(()=>[Y(V(c.optionName)+" ",1),c.serious=="0"?(t(),i("img",Ii)):(t(),i("img",bi))]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0)]),_:2},1032,["label"]))),128))],64))),128))]),W(Ve,{text:"目标",backgroundColor:"#f4f7fd"}),r("div",Ci,[(t(!0),i(k,null,U(ve.value,pe=>(t(),i(k,{key:pe.id},[(t(!0),i(k,null,U(pe.orthTitleList,x=>(t(),b(_e,{key:x.id,label:x.titleName,width:"72px"},{default:u(()=>[x.type==1?(t(),b(a,{key:0,modelValue:x.optionId,"onUpdate:modelValue":c=>x.optionId=c,onChange:c=>H(x.optionId,x,pe.className,"","目标")},{default:u(()=>[(t(!0),i(k,null,U(x.orthOptionsList,c=>(t(),b(d,{class:Z({serious:c.serious=="1",checked:c.choosen===!0}),key:c.id,label:c.id},{default:u(()=>[Y(V(c.optionName),1)]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0),x.type==2?(t(),b(he,{key:1,modelValue:x.optionId,"onUpdate:modelValue":c=>x.optionId=c,onChange:c=>H(x.optionId,x,pe.className,"","目标")},{default:u(()=>[(t(!0),i(k,null,U(x.orthOptionsList,c=>(t(),b(h,{class:Z({serious:c.serious=="1",checked:c.choosen===!0}),key:c.id,label:c.id},{default:u(()=>[Y(V(c.optionName)+" ",1),c.serious=="0"?(t(),i("img",ki)):(t(),i("img",Li))]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0)]),_:2},1032,["label"]))),128))],64))),128))]),W(Ve,{text:"方法",backgroundColor:"#f4f7fd"}),r("div",wi,[(t(!0),i(k,null,U(Ce.value,pe=>(t(),i(k,{key:pe.id},[(t(!0),i(k,null,U(pe.orthTitleList,x=>(t(),i(k,{key:x.id},[x.titleName!=="品牌"&&x.titleName!=="预计矫正周期"?(t(),b(_e,{key:0,label:x.titleName,width:"86px"},{default:u(()=>[x.type==1?(t(),b(a,{key:0,modelValue:x.optionId,"onUpdate:modelValue":c=>x.optionId=c,onChange:c=>H(x.optionId,x,"","","方法")},{default:u(()=>[(t(!0),i(k,null,U(x.orthOptionsList,c=>(t(),i(k,{key:c.id},[c.optionSuffix?(t(),b(Ie,{key:1,"popper-class":"myPopper","popper-style":{width:"auto","min-width":"100px"},placement:"top-start",width:200,visible:c.visible,onAfterLeave:ae=>j(x,c)},{reference:u(()=>[W(d,{class:Z({serious:c.serious=="1"}),label:c.id,onMouseenter:ae=>J(c),onMouseleave:ae=>q(c)},{default:u(()=>[Y(V(c.optionName),1),(t(),i("svg",xi,[r("g",null,[r("path",{d:"M0,4.99999C0,2.23857,2.23857,0,4.99999,0C7.76141,0,9.99998,2.23857,9.99998,4.99999C9.99998,7.76141,7.76141,9.99998,4.99999,9.99998C2.23857,9.99998,0,7.76141,0,4.99999C0,4.99999,0,4.99999,0,4.99999ZM5.49999,3.49999C5.49999,3.49999,5.49999,2.49999,5.49999,2.49999C5.49999,2.49999,4.49999,2.49999,4.49999,2.49999C4.49999,2.49999,4.49999,3.49999,4.49999,3.49999C4.49999,3.49999,5.49999,3.49999,5.49999,3.49999C5.49999,3.49999,5.49999,3.49999,5.49999,3.49999ZM4.49999,3.99999C4.49999,3.99999,4.49999,7.49998,4.49999,7.49998C4.49999,7.49998,5.49999,7.49998,5.49999,7.49998C5.49999,7.49998,5.49999,3.99999,5.49999,3.99999C5.49999,3.99999,4.49999,3.99999,4.49999,3.99999C4.49999,3.99999,4.49999,3.99999,4.49999,3.99999Z","fill-rule":"evenodd",fill:c.clicked||c.hover?c.hoverColor:c.fillColor,"fill-opacity":"1"},null,8,Ni)])]))]),_:2},1032,["class","label","onMouseenter","onMouseleave"])]),default:u(()=>[W(_e,{label:c.brand.titleName},{default:u(()=>[W(a,{modelValue:c.otherContent,"onUpdate:modelValue":ae=>c.otherContent=ae,onChange:ae=>H(c.otherContent,c.brand,c,x,"方法")},{default:u(()=>[(t(!0),i(k,null,U(c.brand.orthOptionsList,ae=>(t(),b(d,{key:ae.id,class:Z({serious:ae.serious=="1"}),label:ae.id},{default:u(()=>[Y(V(ae.optionName),1)]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"])]),_:2},1032,["visible","onAfterLeave"])):(t(),b(d,{key:0,class:Z({serious:c.serious=="1"}),label:c.id},{default:u(()=>[Y(V(c.optionName),1)]),_:2},1032,["class","label"]))],64))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0),x.type==2?(t(),b(he,{key:1,modelValue:x.optionId,"onUpdate:modelValue":c=>x.optionId=c,onChange:c=>H(x.optionId,x,"","","方法")},{default:u(()=>[(t(!0),i(k,null,U(x.orthOptionsList,c=>(t(),b(h,{key:c.id,class:Z({serious:c.serious=="1",checked:c.choosen===!0}),label:c.id},{default:u(()=>[Y(V(c.optionName),1),c.serious=="0"?(t(),i("img",$i)):(t(),i("img",Ti))]),_:2},1032,["class","label"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])):F("",!0)]),_:2},1032,["label"])):F("",!0),x.titleName=="预计矫正周期"?(t(),b(_e,{key:1,label:x.titleName,width:"100px"},{default:u(()=>[W(ye,{style:{width:"100px"},modelValue:x.cephalometricsContent,"onUpdate:modelValue":c=>x.cephalometricsContent=c,onBlur:c=>ke(x)},null,8,["modelValue","onUpdate:modelValue","onBlur"]),Vi]),_:2},1032,["label"])):F("",!0)],64))),128))],64))),128))]),W(Ve,{text:"周期",backgroundColor:"#f4f7fd"}),r("div",Ui,[(t(!0),i(k,null,U(ce.value,pe=>(t(),i(k,{key:pe.id},[(t(!0),i(k,null,U(pe.orthTitleList,x=>(t(),b(_e,{key:x.id,label:x.titleName},{default:u(()=>[W(ye,{style:{width:"100px"},modelValue:x.cephalometricsContent,"onUpdate:modelValue":c=>x.cephalometricsContent=c,onBlur:c=>ke(x)},null,8,["modelValue","onUpdate:modelValue","onBlur"]),Si]),_:2},1032,["label"]))),128))],64))),128))]),W(Ve,{text:"风险",backgroundColor:"#f4f7fd"}),r("div",Oi,[(t(!0),i(k,null,U(Pe.value,pe=>(t(),i(k,{key:pe.id},[(t(!0),i(k,null,U(pe.orthTitleList,x=>(t(),i(k,{key:x.id},[x.titleName!=="备注"?(t(),b(_e,{key:0,label:x.titleName},{default:u(()=>[W(he,{modelValue:x.optionId,"onUpdate:modelValue":c=>x.optionId=c,onChange:c=>H(x.optionId,x)},{default:u(()=>[(t(!0),i(k,null,U(x.orthOptionsList,c=>(t(),i(k,{key:c.id},[c.optionSuffix?(t(),i(k,{key:1},[c.fdiToothCode==null?(t(),b(Ie,{key:0,placement:"right",width:490,trigger:"click",onShow:ae=>Je(c),onAfterLeave:ae=>C(c,x)},{reference:u(()=>[W(h,{onClick:ae=>c.visible=!0,class:Z({serious:c.serious=="1",checked:c.choosen===!0}),label:c.id,onMouseenter:ae=>c.hover=!0,onMouseleave:ae=>c.hover=!1},{default:u(()=>[Y(V(c.optionName),1),c.optionSuffix?(t(),i("svg",Mi,[r("g",null,[r("path",{d:"M0,4.99999C0,2.23857,2.23857,0,4.99999,0C7.76141,0,9.99998,2.23857,9.99998,4.99999C9.99998,7.76141,7.76141,9.99998,4.99999,9.99998C2.23857,9.99998,0,7.76141,0,4.99999C0,4.99999,0,4.99999,0,4.99999ZM5.49999,3.49999C5.49999,3.49999,5.49999,2.49999,5.49999,2.49999C5.49999,2.49999,4.49999,2.49999,4.49999,2.49999C4.49999,2.49999,4.49999,3.49999,4.49999,3.49999C4.49999,3.49999,5.49999,3.49999,5.49999,3.49999C5.49999,3.49999,5.49999,3.49999,5.49999,3.49999ZM4.49999,3.99999C4.49999,3.99999,4.49999,7.49998,4.49999,7.49998C4.49999,7.49998,5.49999,7.49998,5.49999,7.49998C5.49999,7.49998,5.49999,3.99999,5.49999,3.99999C5.49999,3.99999,4.49999,3.99999,4.49999,3.99999C4.49999,3.99999,4.49999,3.99999,4.49999,3.99999Z","fill-rule":"evenodd",fill:c.clicked?c.seriousColor:c.hover?c.hoverColor:c.fillColor,"fill-opacity":"1"},null,8,Ai)])])):F("",!0),c.serious=="0"?(t(),i("img",Di)):(t(),i("img",Ri))]),_:2},1032,["onClick","class","label","onMouseenter","onMouseleave"])]),default:u(()=>[r("div",Bi,[r("div",Fi,[(t(!0),i(k,null,U(Re.value,(ae,E)=>(t(),i("div",{key:E,class:Z(["symptomBox",{itemAlignRight:E===2||E===4||E===0||E===6,marginTop:E==4||E==5,marginBottom:E==2||E==3,marginRight:E===2||E===4||E===0||E===6,marginLeft:E===1||E===3||E===5||E===7}])},[(t(!0),i(k,null,U(ae,(xe,Me)=>(t(),i("div",{class:Z(["symptomItem",{selected:xe.active===!0}]),id:xe.value,key:Me,onClick:Be=>ue(xe,c)},V(xe.label),11,Wi))),128))],2))),128))]),ji,qi])]),_:2},1032,["onShow","onAfterLeave"])):(t(),b(Ie,{key:1,"popper-class":"myPopper","popper-style":{width:"auto","min-width":"100px"},placement:"top-start",width:200,visible:c.visible},{reference:u(()=>[W(h,{onMouseenter:ae=>G(c),class:Z({serious:c.serious=="1",checked:c.choosen===!0}),label:c.id,onMouseleave:ae=>R(ae,c)},{default:u(()=>[Y(V(c.optionName),1),c.optionSuffix?(t(),i("svg",Gi,[r("g",null,[r("path",{d:"M0,4.99999C0,2.23857,2.23857,0,4.99999,0C7.76141,0,9.99998,2.23857,9.99998,4.99999C9.99998,7.76141,7.76141,9.99998,4.99999,9.99998C2.23857,9.99998,0,7.76141,0,4.99999C0,4.99999,0,4.99999,0,4.99999ZM5.49999,3.49999C5.49999,3.49999,5.49999,2.49999,5.49999,2.49999C5.49999,2.49999,4.49999,2.49999,4.49999,2.49999C4.49999,2.49999,4.49999,3.49999,4.49999,3.49999C4.49999,3.49999,5.49999,3.49999,5.49999,3.49999C5.49999,3.49999,5.49999,3.49999,5.49999,3.49999ZM4.49999,3.99999C4.49999,3.99999,4.49999,7.49998,4.49999,7.49998C4.49999,7.49998,5.49999,7.49998,5.49999,7.49998C5.49999,7.49998,5.49999,3.99999,5.49999,3.99999C5.49999,3.99999,4.49999,3.99999,4.49999,3.99999C4.49999,3.99999,4.49999,3.99999,4.49999,3.99999Z","fill-rule":"evenodd",fill:c.clicked?c.seriousColor:c.hover?c.hoverColor:c.fillColor,"fill-opacity":"1"},null,8,Zi)])])):F("",!0),c.serious=="0"?(t(),i("img",Ji)):(t(),i("img",Xi))]),_:2},1032,["onMouseenter","class","label","onMouseleave"])]),default:u(()=>[W(Ie,{placement:"right",width:490,trigger:"click",onShow:ae=>Je(c),onAfterLeave:ae=>C(c,x)},{reference:u(()=>[r("div",Yi,[r("div",zi,[r("div",Hi,[r("div",Qi,V(c.topLeft.sort((ae,E)=>ae.sort-E.sort).map(ae=>ae.value).join("")),1),r("div",Ki,V(c.topRight.sort((ae,E)=>ae.sort-E.sort).map(ae=>ae.value).join("")),1)]),r("div",ed,[r("div",od,V(c.bottomLeft.sort((ae,E)=>ae.sort-E.sort).map(ae=>ae.value).join("")),1),r("div",td,V(c.bottomRight.sort((ae,E)=>ae.sort-E.sort).map(ae=>ae.value).join("")),1)])])])]),default:u(()=>[r("div",sd,[r("div",ad,[(t(!0),i(k,null,U(Re.value,(ae,E)=>(t(),i("div",{key:E,class:Z(["symptomBox",{itemAlignRight:E===2||E===4||E===0||E===6,marginTop:E==4||E==5,marginBottom:E==2||E==3,marginRight:E===2||E===4||E===0||E===6,marginLeft:E===1||E===3||E===5||E===7}])},[(t(!0),i(k,null,U(ae,(xe,Me)=>(t(),i("div",{class:Z(["symptomItem",{selected:xe.active===!0}]),id:xe.value,key:Me,onClick:Be=>ue(xe,c)},V(xe.label),11,nd))),128))],2))),128))]),ld,id])]),_:2},1032,["onShow","onAfterLeave"])]),_:2},1032,["visible"]))],64)):(t(),b(h,{key:0,class:Z({serious:c.serious=="1",checked:c.choosen===!0}),label:c.id},{default:u(()=>[Y(V(c.optionName)+" ",1),c.serious=="0"?(t(),i("img",Ei)):(t(),i("img",Pi))]),_:2},1032,["class","label"]))],64))),128))]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1032,["label"])):x.titleName=="备注"?(t(),b(_e,{key:1,label:x.titleName,width:"72px"},{default:u(()=>[W(ye,{style:{width:"100px"},modelValue:x.cephalometricsContent,"onUpdate:modelValue":c=>x.cephalometricsContent=c,onBlur:c=>ke(x)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1032,["label"])):F("",!0)],64))),128))],64))),128))]),W(Ve,{text:"备注",backgroundColor:"#f4f7fd"}),r("div",dd,[(t(!0),i(k,null,U(Ee.value,pe=>(t(),i(k,{key:pe.id},[(t(!0),i(k,null,U(pe.orthTitleList,x=>(t(),b(_e,{key:x.id,label:x.titleName},{default:u(()=>[W(ye,{style:{width:"400px"},modelValue:x.cephalometricsContent,"onUpdate:modelValue":c=>x.cephalometricsContent=c,onBlur:c=>ke(x)},null,8,["modelValue","onUpdate:modelValue","onBlur"])]),_:2},1032,["label"]))),128))],64))),128))])])}}},cd=Qe(rd,[["__scopeId","data-v-5a7ecc0c"]]);const ud=T=>(go("data-v-5d0c62e7"),T=T(),yo(),T),hd={style:{background:"#f2f3f5"}},pd=ud(()=>r("div",{class:"gap"},null,-1)),fd={class:"header"},md={style:{display:"flex","justify-content":"center",flex:1}},vd=["onClick"],_d={key:0,class:"step-num"},gd={key:1,style:{"margin-right":"12px"},src:aa},yd={class:"ortho-page"},Id={class:"information"},bd={class:"footer"},Cd={class:"desc"},kd={class:"desc uploadDesc"},Ld=["href"],wd={key:0,style:{"margin-left":"20px"}},xd={class:"dialog-footer"},Nd={__name:"index",setup(T){const _=y();window.addEventListener("message",function(a){a.origin==="https://odostest.orangedental.cn:4403"&&(_.value=a.data)});const w=Js(),g=uo(),D=g.params.appId,J=g.params.patientId,ee=[{num:1,desc:"基础信息"},{num:2,desc:"图像分析"},{num:3,desc:"模型分析"},{num:4,desc:"问题列表"},{num:5,desc:"方案目标"},{num:6,desc:"报告预览"}],q=y(0),G=[],fe=y(null),R=y(null),B=y(null),N=y(null),m=y(null),X=y(null),ve=a=>{if(a>q.value){je({message:"请点击下一步哦",type:"warning"});return}else z.value=a};Jt(()=>{G.push(fe,R,B,N,m),document.querySelector(".ortho-page").addEventListener("mousewheel",function(h){h.deltaX!==0&&h.preventDefault()})});const ge=y(),Ce=y(0),re=y(),ce=y(),Ge=()=>{if(z.value==5&&!G[z.value-1].value.goalClicked&&!G[z.value-1].value.methodClicked)je({message:"请检查目标和方法是否填写完毕哦",type:"error"});else if(z.value==5&&!G[z.value-1].value.goalClicked){je({message:"请检查目标是否填写完毕哦",type:"error"});return}else if(z.value==5&&!G[z.value-1].value.methodClicked){je({message:"请检查方法是否填写完毕哦",type:"error"});return}else ro(()=>{q.value=z.value,z.value++,io("/prod-api/business/orthBase",{id:ke.value.id,pdfUrl:"",pdfTime:"",progress:z.value}),window.scrollTo(0,0)})},Ee=a=>{var h;a&&((h=ge.value)==null||h.close(),io("/prod-api/business/orthBase",{id:ke.value.id,pdfUrl:a,pdfTime:Qs(),progress:z.value}),re.value=a)},z=y(0),ke=y();function Pe(){Le(`/prod-api/business/orthBase/${D}`).then(a=>{var h,he;a.code===200?(ke.value=a.data,z.value=(h=a.data)!=null&&h.progress?a.data.progress:1,q.value=z.value,Ce.value=(he=ke.value)==null?void 0:he.id,ke.value&&ke.value.pdfUrl&&(sessionStorage.setItem(`pdfUrl${Ce.value}`,ke.value.pdfUrl),ce.value=`pdfUrl${Ce.value}`,re.value=sessionStorage.getItem(`pdfUrl${Ce.value}`),z.value=6)):z.value=2})}Pe();const le=()=>{if(z.value==4&&!G[z.value-1].value.clicked){je({message:"还未填写诊断哦",type:"error"});return}ro(()=>{q.value=z.value,z.value++,io("/prod-api/business/orthBase",{id:ke.value.id,pdfUrl:"",pdfTime:"",progress:z.value}),window.scrollTo(0,0)})},j=()=>{z.value!=1&&ro(()=>{q.value=z.value,z.value--,io("/prod-api/business/orthBase",{id:ke.value.id,pdfUrl:"",pdfTime:"",progress:z.value}),window.scrollTo(0,0)})},C=()=>{w.push("/index")},ue=()=>{fetch(re.value).then(a=>a.blob()).then(a=>{const h=URL.createObjectURL(a),he=document.createElement("a");he.href=h,he.download="filename.pdf",he.click()})},K=y(!1),H=y({});async function Re(){K.value=!0;const a=await me("/prod-api/business/orthBase/selectOrthRisk",{patientId:J,apmtId:D});H.value=a.data,H.value.dentitionType=a.data.dentitionType||"无",H.value.riskValueSystem="",H.value.riskValue=H.value.riskValue.split("")[0]}const Je=y(!1);async function O(){try{const a=Wo.service({lock:!0,text:"发起审批中",background:"rgba(0, 0, 0, 0.7)"});H.value.pdfUrl=re.value,H.value.riskValueSystem=H.value.riskValueSystem?H.value.riskValueSystem:"无";const h=await me("/prod-api/business/orthBase/sendApproval",{patientId:J,apmtId:D,...H.value});K.value=!1,a.close(),h.code===200&&je({type:"success",message:h.msg})}catch{}}const S=()=>{w.push("/list")},d=[{label:"患者姓名",value:"patientName"},{label:"病例号",value:"privateId"},{label:"诊所",value:"abbreviation"},{label:"牙列期",value:"dentitionType"},{label:"术前诊断",value:"diagnoseStr"},{label:"治疗目标",value:"targetStr"},{label:"治疗计划",value:"planStr"},{label:"矫正方案",value:"schemeStr"},{label:"病例风险（系统）",value:"riskValueSystem"},{label:"病历风险（自评）",value:"riskValue"},{label:"预计矫正周期",value:"correctionPeriod"},{label:"说明",value:"explain"}];return(a,h)=>{const he=Xs("ArrowLeft"),Ie=xs,ye=sa,pe=jt,x=Ps,c=co,ae=Ft;return t(),i("div",hd,[pd,r("div",fd,[r("div",{style:{display:"flex","align-items":"center","margin-right":"40px",cursor:"pointer",width:"100px","margin-left":"20px"},onClick:C},[W(Ie,null,{default:u(()=>[W(he)]),_:1}),Y("返回列表 ")]),r("div",md,[(t(),i(k,null,U(ee,E=>r("div",{class:Z(["step",{active:z.value===E.num}]),onClick:xe=>ve(E.num),key:E.num},[q.value<E.num||z.value===E.num?(t(),i("span",_d,V(E.num),1)):q.value>=E.num?(t(),i("img",gd)):F("",!0),r("span",{class:Z(["step-text",{finished:z.value===E.num||E.num<=q.value}])},V(E.desc),3),W(ye,{class:Z({finished:z.value===E.num||E.num<=q.value})},null,8,["class"])],10,vd)),64))])]),r("div",yd,[r("div",Id,[z.value===1?(t(),b(Ea,{key:0,pdfId:ce.value,ref_key:"step1",ref:fe},null,8,["pdfId"])):F("",!0),z.value===2?(t(),b(Al,{key:1,pdfId:ce.value,ref_key:"step2",ref:R},null,8,["pdfId"])):F("",!0),z.value===3?(t(),b(ei,{key:2,pdfId:ce.value,ref_key:"step3",ref:B},null,8,["pdfId"])):F("",!0),z.value===4?(t(),b(_i,{key:3,pdfId:ce.value,ref_key:"step4",ref:N},null,8,["pdfId"])):F("",!0),z.value===5?(t(),b(cd,{key:4,id:Ce.value,pdfId:ce.value,ref_key:"step5",ref:m},null,8,["id","pdfId"])):F("",!0),z.value===6?(t(),b(Hs,{key:5,onGetPdfResult:Ee,id:Ce.value,ref_key:"pdfComp",ref:X},null,8,["id"])):F("",!0)]),r("div",bd,[z.value>=2&&z.value<=5?(t(),b(pe,{key:0,onClick:j},{default:u(()=>[Y("上一步")]),_:1})):F("",!0),z.value==6?(t(),b(pe,{key:1,onClick:ue},{default:u(()=>[Y(" 下载报告 ")]),_:1})):F("",!0),z.value<5?(t(),b(pe,{key:2,type:"primary",onClick:le},{default:u(()=>[Y("下一步")]),_:1})):F("",!0),z.value==5?(t(),b(pe,{key:3,type:"primary",onClick:Ge},{default:u(()=>[Y("生成报告")]),_:1})):F("",!0),z.value==5&&Je.value==!0?(t(),b(pe,{key:4,type:"primary",onClick:a.checkApproval},{default:u(()=>[Y("查看审批流")]),_:1},8,["onClick"])):F("",!0),z.value==6?(t(),b(pe,{key:5,type:"primary",onClick:Re},{default:u(()=>[Y("发起审批")]),_:1})):F("",!0),z.value==6&&Je.value==!0?(t(),b(pe,{key:6,type:"primary",onClick:S},{default:u(()=>[Y("返回列表")]),_:1})):F("",!0)])]),W(ae,{modelValue:K.value,"onUpdate:modelValue":h[3]||(h[3]=E=>K.value=E),"close-on-press-escape":!1,title:"确认审批",class:"confirmApproval"},{footer:u(()=>[r("span",xd,[W(pe,{onClick:h[2]||(h[2]=E=>K.value=!1)},{default:u(()=>[Y("取消")]),_:1}),W(pe,{type:"primary",onClick:O},{default:u(()=>[Y(" 确认 ")]),_:1})])]),default:u(()=>[(t(),i(k,null,U(d,(E,xe)=>(t(),i(k,{key:E.label},[xe<=6?(t(),b(_e,{key:0,label:E.label,width:"128px"},{default:u(()=>[r("span",Cd,V(H.value[E.value]),1)]),_:2},1032,["label"])):F("",!0),xe==7?(t(),b(_e,{key:1,label:E.label,width:"128px"},{default:u(()=>[r("span",kd,[r("a",{href:re.value,target:"_blank"},V(re.value.split("/")[re.value.split("/").length-1]),9,Ld)])]),_:2},1032,["label"])):xe==8?(t(),b(_e,{key:2,label:E.label,width:"128px"},{default:u(()=>[W(c,{modelValue:H.value.riskValue,"onUpdate:modelValue":h[0]||(h[0]=Me=>H.value.riskValue=Me),disabled:""},{default:u(()=>[(t(),i(k,null,U(["低","中","高"],(Me,Be)=>W(x,{key:Be,label:Me},null,8,["label"])),64))]),_:2},1032,["modelValue"]),H.value.ruleText?(t(),i("span",wd,"风险规则说明："+V(H.value.ruleText),1)):F("",!0)]),_:2},1032,["label"])):xe==9?(t(),b(_e,{key:3,label:E.label,width:"128px"},{default:u(()=>[W(c,{modelValue:H.value.riskValueSystem,"onUpdate:modelValue":h[1]||(h[1]=Me=>H.value.riskValueSystem=Me)},{default:u(()=>[(t(),i(k,null,U(["低","中","高"],(Me,Be)=>W(x,{key:Be,label:Me},null,8,["label"])),64))]),_:2},1032,["modelValue"])]),_:2},1032,["label"])):xe==10?(t(),b(_e,{key:4,label:E.label,width:"128px"},{default:u(()=>[Y(V(H.value.correctionPeriod?H.value.correctionPeriod+"个月":""),1)]),_:2},1032,["label"])):xe==11?(t(),b(_e,{key:5,label:E.label,width:"128px"},{default:u(()=>[Y(V(H.value.explain),1)]),_:2},1032,["label"])):F("",!0)],64))),64))]),_:1},8,["modelValue"])])}}},jd=Qe(Nd,[["__scopeId","data-v-5d0c62e7"]]);export{jd as default};
